# OCP V4.3.1

## V4.3.1 BP1

### Version information

* **Current version:** V4.3.1 BP1

* **Previous version:** V4.3.1

* **Release date:** August 1, 2024

### Bug fixes

* Fixed the issue where OceanBase Cloud Platform (OCP) processes frequently restart due to incorrect container environment information obtained in some Linux operating systems.

* Fixed the issue where the backup directory of the standby tenant fails to be detected after a switchover between the primary and standby tenants.

* Fixed the issue where log errors are frequently returned after OCP is upgraded from V4.2.1 to V4.3.1.

* Optimized the performance of the task initiated to enable the binlog service for a tenant.

## V4.3.1

OCP V4.3.1 is compatible with OceanBase Database V4.3.1. It supports installation and deployment, basic O&M, monitoring and alerting, as well as other features for the binlog service, helping you seamlessly integrate with downstream ecosystems of MySQL. It also supports automatic session switching between the primary and standby tenants based on the service name. This further improves the high-availability solutions of OceanBase Database V4.x. Moreover, OCP V4.3.1 supports object storage services that are compatible with the Amazon Simple Storage Service (S3) protocol as the backup storage media. In addition to the native Amazon S3, it supports the storage media from mainstream cloud vendors worldwide, such as Huawei Cloud Object Storage Service (OBS) and Google Cloud Storage (GCS), meeting the backup storage requirements of customers in multi-cloud and private cloud scenarios.

### Version information

* **Current version:** V4.3.1

* **Previous version:** V4.3.0 BP2

* **Release date:** July 26, 2024

* **Supported upgrade paths:**

  * You can directly upgrade OCP V3.2.4 and later to the current version.

  * To upgrade OCP V2.3.x and later but earlier than V3.2.4 to the current version, you need to upgrade to OCP V3.3.4 first.

  * If you use OCP of a version earlier than V2.3.0, you must first upgrade to OCP V2.3.x and then to V3.3.4.

### Supported OceanBase Database versions

OCP V4.3.1 supports the following versions of OceanBase Database.

* OceanBase Database V1.4.x

* OceanBase Database V2.1.x

* OceanBase Database V2.2.x

* OceanBase Database V3.1.x

* OceanBase Database V3.2.x

* OceanBase Database V4.x

### New features

#### Compatibility with OceanBase Database V4.x

* OCP V4.3.1 supports accessing an OceanBase database using the service name instead of the cluster or tenant name. This means you do not need to change the database connection string in a multi-tenant scenario, which simplifies business management and maintenance. In addition, automatic session switching is implemented for the primary and standby tenants based on the service name. This significantly reduces the business switching time in a switchover or failover scenario.

* OCP V4.3.1 supports the S3 protocol for data backup and restore. It supports the native Amazon S3 as well as other object storage services that are compatible with the S3 protocol, such as Huawei Cloud OBS, Google GCS, Tencent Cloud Object Storage (COS), and China Mobile Ecloud Elastic Object Storage (EOS), covering the object storage services from mainstream cloud vendors worldwide, except Azure Blob. This facilitates convenient data backup and restore and improves data security and reliability.

#### Binlog service

<main id="notice" type='explain'>
<h4>Note</h4>
The binlog service is supported only for MySQL tenants of OceanBase Database.
</main>

* OCP V4.3.1 allows you to create binlog clusters and add service nodes.
* OCP V4.3.1 allows you to restart/stop binlog instances and stop/delete binlog servers.
* OCP V4.3.1 provides monitoring charts of the latency, RPS, CPU, memory, and storage space of binlog instances.
* OCP V4.3.1 provides 14 types of alerts for binlog clusters and binlog instances.
* OCP V4.3.1 allows you to set parameters of binlog clusters and binlog instances.

### Product optimizations

**Cluster management**: OCP V4.3.1 checks the technical architecture in the case of rotating upgrade of a cluster. If your cluster is deployed with two full-featured replicas and one read-only replica, it will prompt you to convert the read-only replica into a full-featured replica.

### Key features

#### Binlog service

MySQL integrates with downstream ecosystems such as Canal and Flink based on binlogs. To better integrate with the MySQL ecosystem, OceanBase Database provides the binlog service that converts its native clogs into MySQL binlogs. This way, you can switch to OceanBase Database while retaining your existing data processes and reusing your existing infrastructure, thereby minimizing the cost of switching databases. OCP V4.3.1 provides capabilities such as the deployment of binlog clusters, as well as the management, monitoring and alerting, and parameter configuration of binlog instances. This significantly reduces the management and maintenance costs of the binlog service and improves human resource efficiency.

The version requirements are as follows:

* OceanBase Database: V3.2.4.4 or later or V4.1.0.1 or later.
* OBProxy: V4.2.1 or later. We recommend that you use V4.3.1.0-402024062810 or V4.2.1.0-20240604114727.
* Binlog service: V4.0.0 or later.

#### Service name

The service name is a new database access method provided by OceanBase Database. It can be considered as the alias of the cluster name and tenant name. This way, an application can access the database by using a connection string such as `mysql -hxxx.xxx.xxx.xxx -P2883 -uroot@<service name>`.

In OceanBase Database V4.1 and later, high availability (HA) is implemented based on the tenant-level primary/standby mode. PRIMARY and STANDBY roles are assigned to tenants rather than clusters. A cluster name is now used only to uniquely identify a cluster. Primary and standby tenants can belong to different clusters and have different names.

OCP V4.3.1 allows you to create a service name for primary and standby tenants, edit, delete, and verify the service name, and bind the clusters of the primary and standby tenants to the same OBProxy cluster. If you set the same service name for primary and standby tenants, the session is automatically switched when you switch between primary and standby tenants. You can use the service name feature flexibly based on your business scenario. For example, you can replace the cluster name or tenant name with a service name in the database connection string in a non-primary/standby scenario, or use different service names for primary and standby tenants in a primary/standby scenario.

The version requirements and considerations are as follows:

* OceanBase Database: V4.2.4.0 or later but earlier than V4.3.0.0.
* OBProxy: V4.3.1 or later.
* A service name must be unique within an OCP cluster, including the multi-cluster mode.

### Bug fixes

The following issues are fixed in OCP V4.3.1:

* Fixed the issues related to failover in multi-cluster mode.
* Fixed the issue where you cannot modify a tenant parameter value that contains characters other than letters and digits.
* Fixed the issue where index information is not displayed for an SQL statement that references a table in a database in the `db.table` format but the database name and table name are enclosed in double quotation marks.
* Optimized the compatibility of the SQL diagnostics feature with OceanBase Database V1.4.79.

### Known issues

| No. | Known issue | Solution |
|----|---------|---------------|
| 1 | Some O&M features of the binlog service may be defective, but this does not affect the normal use of main service features. | If the binlog service is not a must, we recommend that you use OCP V4.3.0 BP2 instead of V4.3.1. |

## Limitations

### Hardware requirements

OCP-Server can be installed on a physical server or in a Docker container. OCP-Server supports the multi-node HA deployment mode.

The following table lists the minimum hardware requirements of an OCP-Server node.

| Hardware | Requirement |
|-------|------------------------------------|
| CPU | <li>x86_64 processor with 8 cores</li><li>AArch64 processor with 8 cores</li> |
| Memory | 16 GiB available memory |
| NIC | 10 Gbit/s NIC |

OCP-Agent takes up few resources and has no special requirements for hardware.

### Operating system requirements

The following table lists the operating system requirements for installing OCP-Server (including OCP-Agent).

| Server architecture | Operating system | Supported version |
|-------------|------------|-----------|
| x86_64 | Red Hat Enterprise Linux (RHEL) | 7.2 and later |
| x86_64 | CentOS | 7.2 and later |
| x86_64 | AliOS | 7.2 and later |
| x86_64 | openSUSE | 12SP3 and later |
| AArch64 | AliOS | 7.2 and later |
| AArch64 | NeoKylin | 7.6 |
| AArch64 | Huawei EulerOS | 2.0 SP8 |
| x86_64 | Debian | Debian GNU/Linux 11 (bullseye) |
| x86_64 | Ubuntu | Ubuntu 18.04.6 LTS |

### Client requirements

Generally, users use browsers to access OCP. The following client requirements apply.

| Browser | Earliest supported version |
|---------|------|
| Chrome | 88 |
| Firefox | 78 |
| Safari | 14 |
| Edge | 88 |

If you need to access OCP from an iOS device, the iOS version must meet the requirement listed in the following table.

| Operating system | Earliest supported version |
|------|------|
| iOS | 10 |

We recommend that you use displays with a resolution greater than 1440 Ã— 810 to ensure optimal use experience.