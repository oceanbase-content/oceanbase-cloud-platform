# Move out an OBProxy cluster

This topic describes how to move out an OBProxy cluster from one OceanBase Cloud Platform (OCP) cluster to another.

<main id="notice" type='notice'>
<h4>Notice</h4>
<p>After an OBProxy cluster is moved out from an OCP cluster, it is no longer managed by the OCP cluster. Proceed with caution. </p>
</main>

## Prerequisites

* You have logged in to the OCP console and are assigned the `OBPROXY_MANAGER` role.

* The cluster to be moved out is in the **RUNNING** state.

* If other services are deployed on the host where the OBProxy cluster is deployed, you cannot delete this host from the OCP cluster when you move out the OBProxy cluster.

* If an OceanBase cluster and an OBProxy cluster share the same host in a move-out or takeover scenario, perform the following operations in sequence. For more information, see [Migrate a cluster between IDCs in OCP](../../1850.ocp-om-best-practices/750.ocp-idc-migration.md).

   1. Move out the OBProxy cluster.
   2. [Move out the OceanBase cluster](../../600.cluster-functions/300.manage-a-cluster/650.migrate-a-cluster.md).
   3. [Take over the OceanBase cluster](../../600.cluster-functions/300.manage-a-cluster/400.take-over-a-cluster.md).
   4. [Take over the OBProxy cluster](../400.manage-a-obproxy-server/200.take-over-an-obproxy.md).
  
## Procedure

OCP provides two methods for you to move out an OBProxy cluster:

* **Method 1**: Go to the **OBProxy** page, find the target OBProxy cluster in the cluster list, click **More** in the **Actions** column, and choose **Migrate OBProxy Cluster**.

* **Method 2**: Go to the **Overview** page of the target OBProxy cluster, hover the pointer over the **...** icon, and click **Migrate OBProxy Cluster**.

The procedure of **Method 2** is described as follows:

1. Log in to the OCP console.

2. In the left-side navigation pane, click **OBProxy**.

3. In the **Clusters** list, click the target OBProxy cluster to go to its **Overview** page.

4. Hover the pointer over the **...** icon and then click **Migrate OBProxy Cluster**.

   ![09162145](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/422/%E8%BF%81%E5%87%BAobproxy%E9%9B%86%E7%BE%A41.png)

5. In the dialog box that appears, perform the following operations:

   1. Export the information about the load balancers used by the OBProxy cluster.

        You can click **Export** or **Move Out** to export relevant load balancer data. If you want to retain the original load balancer configurations in the OBProxy cluster, you can import this file when you take over the OBProxy cluster. This way, you do not need to configure the same load balancer information again. For more information, see [Take over an OBProxy](../200.create-an-obproxy-cluster.md).

   2. Select the host where the cluster is deployed and delete it from the OCP cluster.

        Before you take over the OBProxy cluster in a new OCP cluster, you must delete the host from the original OCP cluster. You can also delete the host on the **Hosts** page. For more information, see [Delete a host](../../850.host-features/550.delete-a-host.md).

   3. Enter **move out** in the textbox and click **Move Out** to submit a task to move out the OBProxy cluster.

    ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/422/%E8%BF%81%E5%87%BAobproxy%E9%9B%86%E7%BE%A4%E5%BC%B9%E7%AA%971.png)

6. In the dialog box that appears, click **View Task** to view the progress.

   After the task status changes to **Completed** and the OBProxy cluster disappears from the **Clusters** list on the **OBProxy** page, the OBProxy cluster is moved out.
