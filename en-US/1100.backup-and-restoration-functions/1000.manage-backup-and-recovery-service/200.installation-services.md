# Install a service

Before you perform a logical backup, you need to install the backup and restore service by referring to this topic.

<main id="notice" type='explain'>
<h4>Note</h4>
<p>The <b>service</b> feature applies only to the <b>logical backup</b> scenario where the cluster to back up is of a version earlier than V2.2.60.</p>
</main>

## Prerequisites

* You have obtained the backup and restore service package `oceanbase-data-maintain-x.x.xx-YYYYMMDDhhmmss.el7.x86_64` or `oceanbase-data-maintain-x.x.xx-YYYYMMDDhhmmss.el7.aarch64`.

  <main id="notice" type='explain'>
    <h4>Note</h4>
    <p>We recommend that you obtain the package of the same version as that of the OceanBase cluster. For example, if the version of the OceanBase cluster to back up is V2.2.52, we recommend that you obtain the package <code>oceanbase-data-maintain-2.2.52-20210331185950.el7.x86_64.rpm</code>. </p>
  </main>
  
* You have added a host as the backup and restore server. For more information, see [Add a host](../../850.host-features/200.add-a-host.md).
* You have deployed the Network File System (NFS) service on the host. For more information, see the "Deploy NFS" topic of OceanBase Database Administrator Guide.

## Procedure

1. In the left-side navigation pane, choose **Backup & Recovery** **>** **Services**.

2. In the upper-right corner, click **Install Service**.

3. Specify the parameters in the **Basic Configurations** section.

   ![7](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/4904306461/p346117.png)

   |     Parameter     |   Description   |
   |------------|---------|
   | Service Name       | The name must start with a letter and end with a letter or a digit. It can contain letters, digits, and underscores (_). It must be 2 to 32 characters in length.   |
   | Service Version       | <ul><li>Select an existing service version. </li><li>Click **Add Version** to upload a new version. </li></ul> |
   | Installation Type       | Select a service type. Valid values: <ul><li> **Backup**: Only the backup service is installed. </li><li> **Recovery**: Only the restore service is installed.   </li><li> **Backup & Recovery**: Both the backup and restore services are installed. </li></ul> |
   | Cleanup Threshold for Service Log Files | An alert is triggered to remind you to clean up logs when the size of service log files reaches the specified threshold. The default threshold is `80%`. You can adjust the threshold as needed.   |
   | Host       | Select the host on which you want to install the service.  |

4. Specify the parameters in the **Storage Configuration** section. Then, click **Test** to verify whether the parameters are properly set.

   ![6](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/4904306461/p346118.png)

   | Parameter | Description |
   |------------|----|
   | Storage Configuration Name       | The name must start with a letter and end with a letter or a digit. It can contain letters, digits, and underscores (_). It must be 2 to 32 characters in length.     |
   | Storage Type       | The type of the storage media for backup files. Valid values: * `OSS`: Alibaba Cloud Object Storage Service, a cloud storage service. * `File`: physical storage.   |
   | Storage Directory  | The directory where backup files are stored. The admin user must have read and write permissions on this directory.   |
   | Alert Threshold for Backup Storage Capacity | An alert is triggered when the backup storage reaches this threshold. The default threshold is `80%`. You can adjust the threshold as needed.  |
   | Domain       | This parameter is required only when the storage type is OSS. It is the domain name at which the OSS bucket can be accessed.    |
   | User       | This parameter is required only when the storage type is OSS. It is the user used to access the OSS bucket.   |
   | AccessKey Pair       | This parameter is required only when the storage type is OSS. It is the AccessKey pair used to access the OSS bucket.    |

5. Specify the parameters in the **Backup Configuration** section.

   * Specify the parameters in the **Back up Metadatabase Configurations** section as needed or use the default values.

    <main id="notice" type='explain'>
    <h4>Note</h4>
    <p>The backup MetaDB is a third-party database that contains tables for backup and restore parameters and backup tasks. The system controls the initiation and cancellation of baseline and incremental data backup by checking whether any backup tasks exist in the MetaDB. It also updates the status of these tasks when they proceed. </p>
    </main>

     When you create a MetaDB, a backup MetaDB is also created.

     ![5](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/5904306461/p346120.png)

   * Specify the parameters in the **Common** section or use the default values.

      ![4](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/5904306461/p346123.png)

      **Cluster List URL** refers to the URL of the cluster where the MetaDB is located.

   * Specify the parameters in the **Others** section or use the default values.

      ![3](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/5904306461/p346125.png)

6. Specify the parameters in the **Restore Configuration** section.

   * Specify the parameters in the **Restore Metadatabase Configurations** section as needed or use the default values.

      <main id="notice" type='explain'>
      <h4>Note</h4>
      <p>The restore MetaDB is a third-party database. The system schedules and controls restore tasks by querying the control tables in the MetaDB. Backup and restore MetaDBs can be deployed on the same MetaDB server. </p>
      </main>

     ![2](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/5904306461/p346169.png)

   * Specify the parameters in the **Others** section or use the default values.

      ![1](https://help-static-aliyun-doc.aliyuncs.com/assets/img/en-US/5904306461/p346170.png)

7. Click **Install**.
