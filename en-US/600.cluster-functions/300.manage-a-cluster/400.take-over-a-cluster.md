# Take over a cluster

You can perform this operation to take over an OceanBase cluster created in a command-line tool or another OceanBase Cloud Platform (OCP) cluster and maintain and manage the OceanBase cluster in the current OCP cluster.

## Prerequisites

* The logon user who takes over the OceanBase cluster has the Cluster Manager role, or the permission to create a cluster.

* All OBServer nodes in the OceanBase cluster to be taken over are running normally.

* Always take over the primary OceanBase cluster first:

  * In a single-OCP scenario, you must take over the primary OceanBase cluster before the standby OceanBase cluster.

  * In a multi-OCP scenario, you must first take over the primary OceanBase cluster to an OCP cluster and then take over the standby OceanBase cluster to another OCP cluster.

* The service names of tenants in the OceanBase cluster to be taken over and existing service names in the system are unique. If the service name of a tenant in the cluster is not unique, the status of the service name is displayed as **INVALID**.

## Considerations

* After an OceanBase cluster is taken over, it cannot be maintained and monitored in the original OCP cluster. We recommend that you evaluate the risk before taking any action.
* If a load type has been configured for the cluster to be taken over, you need to configure a load type for the cluster again on its **Overview** page after the takeover.

## Procedure

1. Log on to the OCP console.

2. In the left-side navigation pane, select **Clusters**. The **Clusters** page automatically appears.

3. On the **Clusters** page, click **Take over Cluster** in the upper-right corner.

4. Connect to the cluster. The following two connection modes are supported:

   * **Direct Connect**: Specify **Access Address**, **Port**, and **root@sys Password** of the cluster, and enter the password of the `proxyro` user as needed. Then, click **Next**.

      <main id="notice" type='explain'>
      <h4>Note</h4>
      <p>The password of the `proxyro` account is used by OBProxy to access an OceanBase cluster. You can enter the password here to ensure consistency. For more information about the `proxyro` account, see <a href="../../800.obproxy-functions/300.manage-a-obproxy-cluster/900.proxyro-user-management.md">Manage the proxyro account</a>. </p>
      </main>

   * **OBProxy**: Specify **Access Address**, **Port**, **Cluster Name**, **Cluster ID (Optional)**, and **root@sys Password** of the cluster, and enter the password of the `proxyro` user as needed, which is used by OBProxy to access the OceanBase cluster. Then, click **Next**.

      <main id="notice" type='explain'>
      <h4>Note</h4>
      <p><ul><li>If you are taking over a standby cluster, you must specify the cluster ID. If you need to take over both the primary and standby clusters, take over the primary cluster first. </li><li>The password of the <code>proxyro</code> account is used by OBProxy to access an OceanBase cluster. You can enter the password here to ensure consistency. For more information about the `proxyro` account, see <a href="../../800.obproxy-functions/300.manage-a-obproxy-cluster/900.proxyro-user-management.md">Manage the proxyro account</a>. </li></ul></p>
      </main>

5. After the cluster is connected, perform a pre-takeover check.

   * If the check succeeds and the hosts corresponding to some OBServer nodes are not managed by the OCP cluster and need to be taken over, you must select the credentials of these hosts for unified management in the OCP cluster.

   * If the check fails, hover the pointer over the icon next to **Failed**, modify the OBServer node configuration as prompted, and then click **Recheck**.

6. Click **Submit**.

   After the task is submitted, you can view the task execution progress on the submission result page or return to the overview page of the cluster.

    <main id="notice" type='explain'>
    <h4>Note</h4>
    <p>When OCP connects to a database, the credential string of the database must exist in credential management. After you take over an OceanBase cluster to an OCP cluster, you can import the file of cluster credentials exported in the <a href="650.migrate-a-cluster.md">migrate a cluster</a> step to the OCP cluster. This way, you can upload cluster credentials in batches. For more information, see <a href="../../1600.system-management-features/100.manage-password-box/300.import-a-credential.md">Import a credential</a>. </p>
    </main>
