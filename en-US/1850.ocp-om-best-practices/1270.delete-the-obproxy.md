# Delete an OBProxy

This topic describes how to delete an OBProxy.

## Scenarios

You can delete OBProxies from an OBProxy cluster or delete the entire OBProxy cluster. If OceanBase Cloud Platform (OCP) Agent on an OBProxy host is offline, you must manually clean up the host environment after you delete the OBProxy in OCP.

## Procedure

### Step 1: Delete an OBProxy

1. Log on to the OCP console.

2. In the left-side navigation pane, click **OBProxy**.

3. In the **Clusters** list, click the target OBProxy cluster to go to its **Overview** page.

4. Find the OBProxy to delete in the **OBProxies** list, and click **Delete** in the **Actions** column.

   You can also select multiple OBProxies and then click **More** and select **Batch Delete**.

   To delete all OBProxies in the OBProxy cluster, you can directly delete the cluster. For more information, see [Delete an OBProxy cluster](../800.obproxy-functions/300.manage-a-obproxy-cluster/500.delete-an-obproxy-cluster.md).

   <main id="notice" type='explain'>
   <h4>Note</h4>
   <p>If a host in the OBProxy cluster is offline, the system will not automatically clean up the host environment during the deletion of the OBProxy cluster. You can manually clean up the host environment. For more information, see <b>Step 2</b>. </p>
   </main>

5. In the dialog box that appears, enter **delete** and then click **Delete**.

6. In the dialog box that appears, click **View Task** to view the progress.

### Step 2: Clean up the host environment

If OCP Agent on the OBProxy host to delete is offline, the system cannot clean up the host environment. In this case, you must record the IP address of the host as well as the installation directory and operation directory of the OBProxy, and manually clean up the host environment.

<main id="notice" type='explain'>
<h4>Note</h4>
<p>The installation directory and operation directory of the OBProxy are recorded in the <code>obproxy_server</code> table of the OCP MetaDB. The default directory is <code>/home/admin/obproxy</code>. </p>
</main>

1. Log on to the host with an account that has the permission to start the `obproxy` process.

2. Run the following command to stop the `obproxyd.sh` process:

   ```shell
   ps -ef | grep obproxyd.sh; kill -9 ${obproxyd_pid}
   ```

3. After the `obproxyd.sh` process is stopped, run the following command to stop the `obproxy` process:

   ```shell
   ps -ef | grep obproxy; kill -9 ${obproxy_pid}
   ```

4. Run the following command to delete the installation directory and operation directory of the OBProxy:

   ```shell
   rm -rf /xxx
   ```
