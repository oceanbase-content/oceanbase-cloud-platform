# Move out an OBProxy cluster

This topic describes how to move out an OBProxy cluster.

## Scenarios

After you move out an OBProxy cluster, it is no longer managed by the original OceanBase Cloud Platform (OCP). However, the obproxy process does not stop running and the OBProxy software is not deleted. You can migrate an OBProxy cluster from one OCP to another by moving the OBProxy cluster out from one OCP and then [taking over OBProxies in the cluster to another OCP](1260.takeover-the-obproxy.md).

## Prerequisites

If you want to migrate a moved-out OBProxy cluster together with its accessible OceanBase cluster to another OCP, we recommend that you use each OBProxy in the OBProxy cluster to access the OceanBase cluster before you move out the OBProxy cluster.

## Procedure

1. Log in to the OCP console. In the left-side navigation pane, click **OBProxy**.

2. On the page that appears, find the target OBProxy cluster in the list, and choose **More** > **Migrate Cluster**. Or, go to the overview page of the OBProxy cluster, click the More icon (**...**) in the upper right corner, and select **Migrate Cluster**.

3. In the dialog box that appears, complete subsequent operations as prompted:

   * If the OBProxy cluster to be moved out is associated with OceanBase Load Balancer (OBLB) or Alibaba Cloud Server Load Balancer (SLB) instances, information about these instances is displayed in the upper part of the dialog box. You can export the information if you want to continue to use these load balancer instances after the takeover. In this case, OCP will save the exported information in a local file. You can import this file when you configure a takeover task. OCP also automatically exports the information to local storage when you click **Migrate**. For more information about taking over OBProxies, see [Take over OBProxies](../800.obproxy-functions/400.manage-a-obproxy-server/200.take-over-an-obproxy.md).

   * OCP also displays a list of hosts involved in the move-out in the dialog box. You can select the hosts on which no other services are deployed to remove the hosts after the OBProxy cluster is moved out. To keep the removed hosts offline, you need to log on to the corresponding hosts and uninstall OCP Agent after OCP completes the move-out task.

4. Enter `move out` in the text box at the bottom and click **Move Out** to submit the OBProxy cluster move-out task. The OBProxy cluster is moved out from the original OCP after the task is completed.

## FAQ

**Will the upper-level business be disconnected after an OBProxy cluster is moved out?**

In most cases, the business will not be disconnected. This is because the move-out of an OBProxy cluster does not change the association between the OBProxy cluster and the load balancer instances or OBServer nodes. However, if an OBProxy cluster in `CONFIG_URL` mode is moved out, it can no longer obtain the latest RootService information from the original ConfigUrl. If the RootService information changes, the OBProxy cluster reports a routing error. In this case, the business is disconnected. To address this issue, we recommend that you use another OCP to take over the moved-out OBProxy cluster at the earliest opportunity, or specify an appropriate ConfigUrl for the OBProxy cluster.

**What sequence can I follow when I want to move out an OceanBase cluster and an OBProxy cluster, and delete the hosts?**

We recommend that you perform the operations in the following sequence: move out the OBProxy cluster, move out the OceanBase cluster, and then delete the hosts.
