# backup_storage_capacity_over_threshold

## Description

This alert is triggered when the backup size exceeds the threshold.

## Alert information

| Trigger method  | Alert level |  Scope  |
|-----------------|-------------|---------|
| Reminder of OCP | Critical     | Service |

## Alert rule

| Metric | Default threshold | Source | Duration | Detection cycle | Elimination cycle |
|--------|-------------------|--------|----------|-----------------|-------------------|
| backup_storage_capacity_used_percent    | N/A               | N/A    | 0 s       | 30 min          | 35 min            |

## Alert templates

* Overview: \${alarm_target} \${alarm_name}

* Details: OceanBase cluster: \${ob_cluster_name}[\${ob_cluster_id}], the capacity of the backup root folder \${storage_url} is over threshold, used percent: \${value}% >= threshold: \${threshold}%, please perform data compression or data dump !

* Overview example: storage_url=xxxxxxx. The storage size exceeds a threshold. The used storage exceeds:\${value}.

* Details example: OceanBase cluster: clust01[5000034], the capacity of the backup root folder file:///obbackup/ is over threshold, used percent: 80% >= threshold: 70%, please perform data compression or data dump !

\${alarm_target} follows the storage_url=xxxxxxx format, and \${value} follows the percentage format, for example, 80%.

## Impact on the system

If the storage directory of backup is full, new backup data cannot be written in, which affects recovery of the backup cluster.

## Possible causes

* The storage directory of backup is set too small.

* The retention period of backup is set too long.

## Solutions

* Expand the storage directory of backup.

* Shorten the retention period of backup.
