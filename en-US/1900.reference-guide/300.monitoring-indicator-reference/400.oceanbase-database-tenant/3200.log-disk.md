# Log disk

This topic describes the monitoring metrics related to the log disk within an OceanBase Database tenant. You can specify a statistical period to query the log disk metrics of a tenant in a single zone or on a single OBServer node.

## log_disk_size

### Definition

The size of space allocated to the tenant log disk within the statistical period.

### Description

| **Metric category** |   **Metric name**    | **Unit** |
|-------------|-----------------------|--------|
|  log_disk_size | ob_tenant_log_disk_size | Byte      |

### Calculation expression

sum(ob_tenant_log_disk_total_bytes{@LABELS}) by (@GBLABELS)

### SQL statements for metric collection

OceanBase Database V4.0 and later:

```sql
SELECT T1.UNIT_ID, T1.SVR_IP, T1.SVR_PORT, T3.TENANT_ID, T3.TENANT_NAME, T1.LOG_DISK_SIZE, T1.LOG_DISK_IN_USE FROM (SELECT UNIT_ID, SVR_IP, SVR_PORT, SUM(LOG_DISK_SIZE) AS LOG_DISK_SIZE, SUM(LOG_DISK_IN_USE) AS LOG_DISK_IN_USE FROM V$OB_UNITS GROUP BY UNIT_ID) T1 JOIN DBA_OB_UNITS T2 JOIN (SELECT TENANT_ID, TENANT_NAME FROM DBA_OB_TENANTS WHERE TENANT_TYPE IN ('SYS', 'USER')) T3 ON T1.UNIT_ID = T2.UNIT_ID AND T2.TENANT_ID = T3.TENANT_ID
```

## log_disk_used

### Definition

The size of occupied space of the tenant log disk within the statistical period.

### Description

| **Metric category** |   **Metric name**    | **Unit** |
|-------------|-----------------------|--------|
|  log_disk_used | ob_tenant_log_disk_used | Byte      |

### Calculation expression

sum(ob_tenant_log_disk_used_bytes{@LABELS}) by (@GBLABELS)

### SQL statements for metric collection

OceanBase Database V4.0 and later:

```sql
SELECT T1.UNIT_ID, T1.SVR_IP, T1.SVR_PORT, T3.TENANT_ID, T3.TENANT_NAME, T1.LOG_DISK_SIZE, T1.LOG_DISK_IN_USE FROM (SELECT UNIT_ID, SVR_IP, SVR_PORT, SUM(LOG_DISK_SIZE) AS LOG_DISK_SIZE, SUM(LOG_DISK_IN_USE) AS LOG_DISK_IN_USE FROM V$OB_UNITS GROUP BY UNIT_ID) T1 JOIN DBA_OB_UNITS T2 JOIN (SELECT TENANT_ID, TENANT_NAME FROM DBA_OB_TENANTS WHERE TENANT_TYPE IN ('SYS', 'USER')) T3 ON T1.UNIT_ID = T2.UNIT_ID AND T2.TENANT_ID = T3.TENANT_ID
```

## log_disk_used_percentage

### Definition

The percentage of occupied space of the tenant log disk within the statistical period.

### Description

| **Metric category** |   **Metric name**    | **Unit** |
|-------------|-----------------------|--------|
|  log_disk_used_percentage | ob_tenant_log_disk_used_percentage | %      |

### Calculation expression

100 * (sum(ob_tenant_log_disk_used_bytes{@LABELS}) by (@GBLABELS) / sum(ob_tenant_log_disk_total_bytes{@LABELS}) by (@GBLABELS))

### SQL statements for metric collection

OceanBase Database V4.0 and later:

```sql
SELECT T1.UNIT_ID, T1.SVR_IP, T1.SVR_PORT, T3.TENANT_ID, T3.TENANT_NAME, T1.LOG_DISK_SIZE, T1.LOG_DISK_IN_USE FROM (SELECT UNIT_ID, SVR_IP, SVR_PORT, SUM(LOG_DISK_SIZE) AS LOG_DISK_SIZE, SUM(LOG_DISK_IN_USE) AS LOG_DISK_IN_USE FROM V$OB_UNITS GROUP BY UNIT_ID) T1 JOIN DBA_OB_UNITS T2 JOIN (SELECT TENANT_ID, TENANT_NAME FROM DBA_OB_TENANTS WHERE TENANT_TYPE IN ('SYS', 'USER')) T3 ON T1.UNIT_ID = T2.UNIT_ID AND T2.TENANT_ID = T3.TENANT_ID
```
