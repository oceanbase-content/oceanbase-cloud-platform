# 新建屏蔽条件

本章节为您介绍如何屏蔽告警。

## 背景信息

如 [查看告警事件](../900.alert-management/2200.view-alert-events.md)  中描述在 **告警事件** 页签中可以快速屏蔽告警，但只能屏蔽已产生告警事件的告警项。本章节将为您介绍更为灵活及全面的屏蔽方式，对于不想关注的告警您可提早进行干预。

屏蔽条件新建完成后，系统将会依照屏蔽条件对告警进行屏蔽，该屏蔽条件会在 30 秒内生效。

## 操作步骤

1. 登录 OCP。

2. 在左侧导航栏中选择 **系统管理** \> **告警** 。

3. 在 **屏蔽告警** 页签中单击 **新建屏蔽条件** 。

4. 在 **新建屏蔽条件** 的对话框中配置屏蔽条件。

   |  屏蔽条件  |    配置说明    |
   |--------|--------|
   | 应用     | 告警来源。可选择 OceanBase、OBProxy、OCP、OMS 和 日志。   |
   | 屏蔽对象类型   | 依据实际需要，选择屏蔽的范围是全部、租户还是服务器。选项的显示根据应用的选择而有所不同。   |
   | 屏蔽对象   | 依据实际需要，选择具体的告警对象。</br>当选择全部对象，您可通过勾选右侧的 **排除对象**，对不需要屏蔽的对象进行排除。  |
   |屏蔽告警规则   | 选择需要屏蔽的告警，可多选。|
   | 标签  | 支持对指定的指标进行屏蔽，如慢 SQL 告警，支持对 SQL ID 进行过滤。最多可添加 8 个标签。  |
   | 屏蔽结束时间   | 配置告警屏蔽的结束时间。在结束时间前，被屏蔽的告警不会上报。为必填项。 <ul><li>可单击方框内自定义结束时间。</li><li> 也可单击方框后的时间，如单击 **6 小时** ，系统会将当前时间 + 6 小时填充到方框中。</li>    |
   | 每日屏蔽时段 | 打开每日屏蔽时段开关，并配置开始时间和结束时间，系统会在每日的该时间段内对告警进行屏蔽。   |

   当您需要屏蔽某条告警时，可通过添加 **标签** 对告警进行精确匹配。以屏蔽 **adminMT** 集群下 **meta2** 租户的某条慢 SQL 告警为例，详细配置如下：

      * （选填）添加 **标签名** 为 “ob_cluster”，标签值为集群名称 “**adminMT**”。
      * （选填）添加 **标签名** 为 “ob_cluster_id”，标签值为集群 ID “**15**” 。指定集群 ID 用于区分主备集群。
      * （选填）添加 **标签名** 为 “tenant_name”，标签值为租户名称 “**meta2**”。
      * 添加 **标签名** 为 “sql_id”，标签值为该条慢 SQL 的 SQL ID。

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>当告警满足所有标签时，系统才会对其进行屏蔽。其中，上述配置中的 <strong>选填</strong> 信息是为了帮助您更好地理解和使用标签，在实际使用过程中，您可省略此部分配置。</p>
  </main>

   ![Image 128](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/401/%E6%96%B0%E5%BB%BA%E5%B1%8F%E8%94%BD%E6%9D%A1%E4%BB%B61.png)

5. 单击 **确定** 。

   系统返回 **屏蔽条件** 列表，且列表中会新增一条数据即新建的屏蔽条件。

   **屏蔽条件** 列表展示全部告警屏蔽配置，默认显示登录用户创建的告警屏蔽配置。

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <ul>
    <li>告警屏蔽条件创建之后，可能不会立刻生效，最多需要 30 秒生效。</li>
    <li>超过屏蔽截止时间 7 天以上的屏蔽配置将不会在 <strong>屏蔽条件</strong> 列表中展示。</li>
    </ul>
  </main>
