# 告警分组

为了方便配置告警推送，OCP 支持告警分组，可以对每个告警规则进行简单分类。

## 管理分组

1. 登录 OCP。

2. 在左侧导航栏中单击 **监控告警** **\>** **告警** 。

3. 在 **告警规则** 页签的左侧管理 **规则分组** 。

   * 创建自定义分组：单击 **规则分组** 右侧的创建图标，输入新分组的名称。

     ![Image 82](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/401/%E8%A7%84%E5%88%99%E5%88%86%E7%BB%841.png)

   * 修改分组名称：展开指定分组右侧 **...** 并选择 **重命名** 。

     ![Image 110](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8912299461/p430091.png)

   * 复制分组：展开指定分组右侧 **...** 并选择 **复制** 。

     系统将以源分组为基础新建分组，新建的分组下包含源分组下的告警规则信息。新建分组的名称默认为 “源分组名称_Copy”，您可对新建的分组重新命名。

   * 删除分组：展开指定分组右侧 **...** 并选择 **删除** 。

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>系统内建分组无法进行重命名和删除操作。</p>
  </main>

## 查询分组中的告警规则

1. 在左侧导航栏中单击 **系统管理** **\>** **告警** 。

2. 在 **告警规则** 页签左侧的 **规则分组** 中，可以查看当前所有的告警分组。

   单击分组名称，界面右侧显示该分组中的所有告警规则。

   ![Image 113](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/401/%E5%91%8A%E8%AD%A6%E5%88%86%E7%BB%84%E8%AF%A6%E6%83%851.png)

3. 在页面上方的查询栏选择查询条件，即可查询到该分组下符合查询条件的告警规则。

## 添加告警规则到告警分组

* 添加单个告警规则到告警分组：

  1. 在左侧导航栏中单击 **系统管理** **\>** **告警** 。

  2. 在 **告警规则** 页签中找到指定告警规则。

  3. 在其对应的操作列，在 **...** 中选择 **添加到规则分组** 。

  4. 在弹窗中选择规则分组。

  5. 单击 **确定**。

  ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/401/%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%91%8A%E8%AD%A6%E5%88%86%E7%BB%841.png)

* 添加多个告警规则到告警分组：

  1. 在左侧导航栏中单击 **系统管理** **\>** **告警** 。

  2. 在 **告警规则** 页签中勾选需要需要添加的告警规则。

  3. 单击 **批量添加到告警分组**。

  4. 在弹窗中选择规则分组。

  5. 单击 **确定**。

  ![分组管理](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/401/%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%91%8A%E8%AD%A6%E5%88%86%E7%BB%841.png)

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>确保每个告警规则都设置了告警分组，当发生告警时才能通知到相关人员。</p>
  </main>

## 移除告警规则

1. 在左侧导航栏中单击 **系统管理** **\>** **告警** 。

2. 在 **告警规则** 页签中，在左侧 **分组管理** 中选择待操作的分组，右侧页面显示该分组的所有告警规则。

   单击待移除的告警规则 **操作** 列的 **移除** 按钮，将该告警规则从该分组中移除；也可以勾选需移除的告警规则，单击 **批量移除** ，对告警规则进行批量移除操作。

   ![Image 85](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/401/%E6%89%B9%E9%87%8F%E7%A7%BB%E9%99%A4%E5%91%8A%E8%AD%A6%E8%A7%84%E5%88%991.png)

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>该操作只是从分组中移除告警规则，并不会删除告警规则本身。</p>
  </main>

## 默认分组

系统内建 8 个初始化分组，系统内建分组可以编辑，无法删除。

| **分组名称** |   **分组描述**       |
|----------|-------|
| 数据库内核      | 数据库资源相关告警，如 OceanBase 集群告警、OceanBase 租户告警、OceanBase 服务器告警等。 |
| dev      | 运维人员需关注的告警。   |
| 备份恢复      | 备份恢复管理员关注的告警，一般包括备份恢复相关的告警。   |
| 数据迁移      | OMS 相关的告警。   |
| 提示      | 提醒信息，如运维操作结果提醒。   |
| ocp      | OCP 相关组件告警，相关组件包括 OCP-Agent、MetaDB、MetaDB 依赖的 OBProxy 和 OCP 内部组件等。  |
| oas     | 智能诊断所依赖的告警规则。 |
| 日志    | 日志告警，包括 OceanBase 日志告警、OBProxy 日志告警、服务器 message 日志告警、ocp_agent 日志告警等。 |
| 自愈     | 可一键执行应急预案的告警。 |
| 资源     | 服务器资源使用提醒的告警，包括内存，句柄，磁盘等。 |
| 性能     | 服务器性能使用相关的告警。 |
| 可用性     | 高可用状态相关的告警。 |
