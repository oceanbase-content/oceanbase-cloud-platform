# 管理租户 Binlog 服务

Binlog 服务是用于收集 OceanBase 的事务日志并转换为 MySQL Binlog 的服务。您可参考本节内容，对租户的 Binlog 服务进行管理，包括如何开通/关闭 Binlog 服务、如何修改 Binlog 配置，以及如何删除租户 Binlog 服务。

<main id="notice" type='notice'>
<h4>功能适用性</h4>
<p>该内容仅适用于 OCP 企业版，OCP 社区版不支持此功能。</p>
</main>

## 前提条件

* 请确保当前登录 OCP 的用户具备如下权限：

  * **集群维护** 或 **租户维护** 资源权限。
  * 租户 **概览** 菜单权限。

* 仅支持 **正常运行** 状态的租户开通 Binlog 服务。
* 租户所属集群 V3.x 版本要求不低于 V3.2.4.4；V4.x 版本要求不低于 V4.1.0.2。

## 开通 Binlog 服务

1. 登录 OCP。

2. 在左侧导航栏选择 **租户** ，系统默认进入 **租户列表** 页签。

3. 在 **租户列表** 中选择待操作的租户并单击其租户名，进入租户 **概览** 页面。

4. 在 **基本信息** 模块，单击 Binlog 服务后的 **开通**。

5. 在对话框中配置如下信息。

    | 参数 | 说明 |
    |------|-------|
    | 关联 Binlog 集群 |  为租户选择关联的 Binlog 集群，仅支持选择运行中的 Binlog 集群。  |
    | 关联 OBProxy 集群 |  选择该租户已关联的 OBProxy 集群，OBProxy 版本号需大于等于 V4.2.1.0。  |
    | 保留时长（小时） |  本租户 Binlog 日志超过保存的时长，超过此时长日志文件会启动自动清理。请输入大于等于 1 的整数，上限为 8760。 |
    | 磁盘空间上限（GB） |  本租户 Binlog 日志占用超过空间保护值，超过此值日志文件会启动自动清理。请输入大于等于 1 的整数，上限为 102400。 |

## 其它操作

Binlog 服务开通后，您可以根据业务需要对租户的 Binlog 服务进行其它操作，如修改 Binlog 配置、查看 Binlog 实例和关闭 Binlog 服务。

* 单击 **Binlog 服务** 后的 **操作** > **修改 Binlog 配置** ，支持修改关联的 OBProxy 集群、Binlog 的保留时长（小时）和磁盘空间上限（GB）。
* 单击 **Binlog 服务** 后的 **操作** > **查看 Binlog 实例** ，可跳转至 Binlog 实例概览页，查看实例的详细信息，详情可参考 [查看 Binlog 实例](../../820.binlog-service-fuctions/300.manage-a-binlog-cluster/500.manage-binlog-instance/100.binlog-instance-overview.md)。
* 单击 **Binlog 服务** 后的 **操作** > **关闭 Binlog 服务** ，可以关闭 Binlog 服务。Binlog 关闭后，已生成的日志文件会全部删除，其占用的存储空间也会被释放。
