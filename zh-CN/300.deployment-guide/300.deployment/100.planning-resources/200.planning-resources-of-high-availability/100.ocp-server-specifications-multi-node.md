# OCP 服务器配置要求

因为 OCP 服务在运行过程中会有大量的计算和存储开销，所以需要根据待管理的对象规模进行资源规划。在多节点 OCP 场景下，您需在 [添加服务器](../../../200.prepare-the-deployment-environment/200.standardized-host.md) 环节添加多个服务器，且每台服务节点机器的配置都需满足如下要求。

## CPU 和内存

OCP-Server 机器的 CPU 和内存资源配置参考如下表所示。以下配置是以每个集群中包含 10 个租户为标准，进行计算得出的数据，请您根据实际情况进行计算，选择合适的 CPU 和内存。

| **管理的机器数量（台）** | **CPU（核）** | **内存（GB）** |
|----------------|------------|------------|
| ≤ 20           | 8          | 16         |
| ≤ 50           | 16         | 32         |
| ≤ 200          | 32         | 64         |
| ≤ 400          | 64         | 128        |

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <ul>
    <li>OCP-Server 机器要求的最低配置为 8 核 16 GB 以及 500 GB 可用磁盘空间，当单个主机的租户数量 ≤ 20 时，仍建议 CPU 和内存保持为 8 核 16 GB。</li>
    <li>支持 400 台及以上的主机管理，未在真实环境验证，如果需要管理更多的主机，请与 OceanBase 的服务人员联系。</li>
    </ul>
  </main>

## 磁盘容量

OCP-Server 在运行过程中会写入文件到磁盘，这些数据会占用磁盘空间，我们推荐 OCP-Server 至少需要预留 500 GB 的空间，以免因磁盘写满导致功能受影响。

OCP-Server 在运行过程中的磁盘使用情况如下表所示。

|   **类别**   |                                                                 **存储路径**                                                                  |                                                  **容量要求**                                                   |
|------------|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------|
| OCP 程序     | `/home/admin/ocp-server/`   | OCP 程序安装后大约占用 1 GB 空间，自带 rpm 约占用 5 GB，建议预留 10 GB。                                                           |
| OCP 主进程日志  | /home/admin/logs/ocp/                                                                                                                     | OCP 系统参数配置了 log 文件大小和保留的文件数量。 默认配置为单个文件 100 MB，每天至少 5-10 个文件，每个文件最多保留 100 天，建议预留 100 GB 空间。 |
| OCP 任务日志   | /home/admin/logs/task/                                                                                                                    | 未设置容量限制，OCP 会定时清理任务日志，清理任务按照磁盘剩余空间大于 20 % 的目标清理日志文件。清理时，首先清理更新时间更早的日志文件，需预留 100 GB 空间。                      |
| OCP 文件本地缓存 | /home/admin/data/files/                                                                                                                   | 未设置容量限制，OCP 文件主要是 OCP 管理对象相关的安装包，且主要是 OceanBase 安装包，安装包大小平均在 500 MB 左右，按照 100 个安装包预估，需预留 100 GB 空间。         |

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>OCP-Server 的日志保留大小可以通过 OCP 系统参数进行配置，详见 <a href="../../../../1600.system-management-features/300.manage-system-parameter/200.modify-system-parameters.md">修改系统参数</a>。</p>
  </main>
