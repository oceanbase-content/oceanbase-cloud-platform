# 管理预案

您可参考本节内容对预案进行管理。

<main id="notice" type='notice'>
<h4>功能适用性</h4>
<p>该内容仅适用于 OCP 企业版，OCP 社区版不支持此功能。</p>
</main>

## 前提条件

当前登录用户具有系统管理员（ADMIN）角色。

## 新建预案

当已有预案无法满足您的业务场景时，您可以根据实际业务需要进行预案定制化。

<main id="notice" type='notice'>
<h4>注意</h4>
<p>系统内置预案的优先级要高于自定义预案。</p>
</main>

1. 登录 OCP 平台，在左侧导航栏选择 **运维管理 > 预案管理**。

2. 单击 **预案** 页签，进入 **预案** 列表页面。

3. 单击右上角 **新建预案**。

4. 在弹出的面板中配置预案信息，完成后单击 **确定**。

    预案参数说明如下。

    |  参数  |  说明  |
    |--------|---------|
    |  预案名称  |  预案的唯一标识。  |
    |  预案类型  |  选择具体的预案类型，预案类型说明可参见 [概述](100.plans-overview.md) 章节的 **预案类型说明**。 |
    |  选择对象  |  依据实际需要，选择预案支持的具体对象，对象的类型会根据 **预案类型** 的选择而有所不同。当对象选择 **全部** 时，预案支持的对象将包含当前及未来新增的所有同类型对象，您可通过勾选右侧的 **排除对象**，对不需要使用该预案的对象进行排除。  |
    | 扩容系数  | 当 **预案类型** 为 **在租户内存超限后对租户内存扩容**、**在租户 CPU 超限后对租户 CPU 扩容** 和 **OBProxy 连接数不足时自动扩充配置** 时进行展示，用于设置扩容比例。可设置范围为 1% ~ 100%，默认为 20%。|
    | 服务器内存最大使用百分比 | 当 **预案类型** 为 **OBProxy 连接数不足时自动扩充配置** 时进行展示，用于设置 OBProxy 集群的服务器内存最大使用百分比。可设置范围为 50% ~ 100%，默认为 90%。|
    |  自动执行  |  选择是否自动执行预案，默认关闭。 |

    ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/430/%E6%96%B0%E5%BB%BA%E9%A2%84%E6%A1%88%E6%A8%A1%E6%9D%BF.png)

## 禁用/启用预案

预案管理可以更好地应对突发事件与危机，减少损失并保障数据库稳定运行。预案与您的业务场景存在紧密关联，需要根据实际情况进行开启或者关闭。

* POC 过程中，如您需要进行高可用测试，请关闭 **在 OBServer 进程异常退出时重新拉起** 预案的自动执行，以免造成测试结果不符合预期。
* 同时也建议关闭 SQL 相关预案的自动执行，需要您确认相关 SQL 后再手动执行，避免造成业务运行异常。

1. 登录 OCP 平台，在左侧导航栏选择 **运维管理 > 预案管理**。

2. 单击 **预案** 页签，进入 **预案** 列表页面。

3. 选择需要操作的预案，单击操作列的 **禁用** 或 **启用**。

![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/430/%E7%A6%81%E7%94%A8%E6%A8%A1%E6%9D%BF.png)

## 编辑预案

您可参考本节内容对自定义的预案进行修改，系统内置预案暂不支持修改。

1. 登录 OCP 平台，在左侧导航栏选择 **运维管理 > 预案管理**。

2. 单击 **预案** 页签，进入 **预案** 列表页面。

3. 选择需要操作的预案，单击操作列的 **编辑**。

4. 在弹出的面板中修改预案信息。

    详细参数说明可参考 **新建预案**。

## 删除预案

当自定义的预案已不再适用您的业务场景时，您可参考本节内容将其删除，系统内置预案暂不支持删除。

1. 登录 OCP 平台，在左侧导航栏选择 **运维管理 > 预案管理**。

2. 单击 **预案** 页签，进入 **预案** 列表页面。

3. 选择需要操作的预案，单击操作列的 **删除**。

4. 在对话框中单击 **确认**。
