添加主机
=========================

在创建集群之前，需要将用到的主机添加到 OCP 中。创建 1-1-1 的集群，需要添加 4 台主机。3 个 Zone 每一个占用一台主机，OBProxy 占用一台主机。

**前提条件**
-----------------------------

当前登录用户需要具备主机管理权限。

**操作步骤**
-----------------------------

1. 登录 OCP。

2. 在左侧导航栏中单击 **主机** **。**

3. 在页面右上角单击 **添加主机** 。

   ![05191443](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4819141261/p275300.png)

4. 填写 **IP 地址** 和 **SSH 端口号** 。输入新主机的 IPv4 地址，支持同时添加多个 IP 地址（多个 IP 之间用英文逗号分隔）；SSH 端口号默认 22。

5. 选择机型。如果没有对应的机型，可以单击新增机型，立即在 OCP 中新增机型。

   机型是用户为配置相同的主机指定的一个标签，建议用户指定有意义的名称，便于更好地管理主机。

   ![1725](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5295987361/p358646.png)

6. 选择机房。如果没有对应的机房，可以单击新增机房，立即在 OCP 中新增机房。

   * 区域用于表示主机所处的地理区域，一个物理区域下可以存在一个或多个物理机房。

   * 区域和机房是 OceanBase 负载均衡和 SQL 语句路由策略的参考项，请按照实际情况填写。

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>OCP V3.1.1 版本开始支持多可用区模式，新增机房时，将在当前 OCP 所在的多可用区中创建新的机房。</p>
  </main>

   ![1726](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5295987361/p358647.png)

7. 在 **选择凭据** 列表中选择主机的登录凭据。

   ![1728](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5295987361/p358649.png)

   |  参数  |                               说明                               |
   |------|----------------------------------------------------------------|
   | 凭据名  | 以英文字母开头、英文或数字结尾，可包含英文、数字和下划线，且长度为 2 \~ 32                      |
   | 授权类型 | 包含用户名/密码和 SSH 私钥两种方式。                                          |
   | 用户类型 | 支持拥有 ROOT 权限的 SSH 用户，拥有 ROOT 权限的普通用户须先配置免密执行 sudo 指令。OCP 目前仅支持配置所有指令免密执行 sudo，即在 /etc/sudoers 文件中，添加 `username ALL=(ALL) NOPASSWD:ALL`。 |

8. （可选）填写主机说明。

9. 单击 **确定** 。
