# OCP V3.2.3

#RNDate#2021-12-27

OceanBase 云平台（OceanBase Cloud Platform，OCP）V3.2.3 版本新增了日志白屏查询的功能和参数模板功能。同时，在监控和告警方面也做了跨越式的更新。性能监控支持下钻分析，并且对部分性能指标做了细分方便您全方位了解和分析业务，SQL 诊断中支持设置 SQL 限流、计划绑定和查询绑定历史，性能报告中则是增加了 PRC、内存、参数配置变化的统计信息的展示。而告警功能在该版本不仅支持多阈值，还新增了 10 个内置告警以加强 OCP 对 OceanBase 集群的运维能力。

## 版本信息

* **版本号：** V3.2.3

* **前置版本：** V3.1.5

* **版本发布日期：** 2021 年 12 月 27 日

* **支持的升级路径：** 对于 OCP V2.3.x 及之后版本，均可以直接升级到本版本。对于 OCP V2.3.0 之前版本，需要首先升级到 V2.3.x 版本，然后再升级到本版本。

## 支持的 OceanBase 数据库版本

OceanBase 云平台 V3.2.3 版本支持下表所列版本的 OceanBase 数据库。

* OceanBase V1.4.x

* OceanBase V2.1.x

* OceanBase V2.2.x

* OceanBase V3.1.x

* OceanBase V3.2.x

## 新增功能

* 集群和租户的 **性能监控** 支持对监控进行下钻分析。

  通过下钻功能，您可将监控指标直接下钻到租户或者 OBServer 节点维度，查看指标在该维度的数据，而无需再通过复杂的路径切换到租户的 **性能监控** 页面或主机的 **监控** 页签中。
  
* 新增日志查询功能，您可使用该功能在 OCP 界面设置查询条件，查看您所需的日志。查询范围覆盖 OBServer 节点、OBProxy、主机等所有类型的日志。使您无需下载，也可轻松进行日志检索。

* SQL 诊断功能支持在 SQL 详情页为 SQL 绑定索引、计划绑定、和SQL 限流以及绑定历史查询。

* 新增 10 个内置告警项，实现对活跃会话数、clog 同步延迟、OCP 跨云管控等方面的全方位监控及预警。同时，告警支持多阈值，为 OceanBase 集群的性能及稳定提供了更加坚实的保障。

* 新增参数模板的功能。如您需创建多个配置相同的租户或集群，您可先创建参数模板，然后在 **新建租户** 或 **创建集群** 的时候应用模板，这样可避免您 **创建集群** 或 **新建租户** 时重复配置集群/租户的参数。

  * 创建模板您可参考：[集群参数模板管理](https://www.oceanbase.com/docs/enterprise-oceanbase-ocp-cn-10000000000377800)。

  * 创建集群或租户您可参考：[创建集群](https://www.oceanbase.com/docs/enterprise-oceanbase-ocp-cn-10000000000378283)、[新建租户](https://www.oceanbase.com/docs/enterprise-oceanbase-ocp-cn-10000000000377507)。

## 功能增强

* 优化性能监控功能，将集群及租户的相关指标做进一步细分，为您提供更详细的性能信息。这些指标包括：

  * 集群： **QPS** 、 **查询响应时间** 、 **TPS** 、 **事务响应时间** 。

  * 租户： **请求等待队列** 、 **TPS** 、 **事务响应时间** 。

* 优化升级和重启 OBServer 节点的逻辑，支持停机升级、停机重启 OBServer 节点。该优化能够满足您在没有业务连续性要求情况下，快速升级及重启 OBServer 节点的诉求。

* 完善集群 **性能报告** 功能，性能报告中新增对 **内存** 、 **RPC** 、 **参数配置变化** 统计信息的展示。

## 修复的问题

OceanBase 云平台 V3.2.3 版本修复了以下问题：

* SQL 诊断采集不完整和前端加载慢的问题。

* 性能报告部分数据丢失问题。

* 任务失败后点击重试和放弃异常问题。

## 已知问题

| 编号 |                            已知问题                            |                       规避方法                        |
|----|------------------------------------------------------------|---------------------------------------------------|
| 1  | OCP 2.4 不保存主机密码凭证。                                         | OCP 2.4 升级时，需要添加主机密码箱密码都 OCP，然后重装所有 ocp_agent。    |
| 2  | 更改 proxyro 密码过程中, 必须保证所有 OCP 集群, OceanBase 集群, OBProxy 可用, 否则会卡住。 | 更改 proxyro 密码过程中, 保证所有 OCP 集群, OceanBase 集群, OBProxy 可用。 |
| 3  | OceanBase 集群 2.3.x 升级到 3.2.x 集群架构不显示问题。                    | 手动填写集群架构信息。                                       |

## 版本使用限制

### 硬件要求

OCP-Server 可以安装在物理机上，也支持安装运行在 Docker 容器中。OCP-Server 支持多节点高可用部署模式。

OCP-Server 节点最低硬件要求如下表所示。

| 硬件  |                 要求                 |
|-----|------------------------------------|
| CPU | <li>X86_64，8 核</li><li>ARM aarch 64 架构，8 核</li> |
| 内存  | 可用内存 16 GB                         |
| 网卡  | 万兆网卡                               |

OCP-Agent 自身占用资源很少，对安装节点硬件资源没有特别要求。

### 操作系统要求

安装 OCP 服务端（含 OCP-Agent）的操作系统要求如下表所示。

|    服务器类型    |    操作系统    |   支持版本    |
|-------------|------------|-----------|
| x86_64      | RHEL       | 7.2 及以上版本 |
| x86_64      | CentOS     | 7.2 及以上版本 |
| x86_64      | AliOS      | 7.2 及以上版本 |
| x86_64      | openSUSE   | 12SP3 及以上 |
| ARM aarch64 | AliOS      | 7.2 及以上版本 |
| ARM aarch64 | 中标麒麟       | 7.6       |
| ARM aarch64 | 华为 EulerOS | 2.0 SP8   |

### 客户端要求

一般用户会通过 Web 浏览器来访问 OCP 服务，故对客户端的要求如下所示。

|   浏览器   | 最小版本 |
|---------|------|
| Chrome  | 81   |
| Firefox | 64   |
| Safari  | 10   |
| Edge    | 13   |

如果您需要通过 iOS 操作系统的设备来访问 OCP，版本要求如下表所示。

| 操作系统 | 最小版本 |
|------|------|
| iOS  | 10   |

为了具备最佳的使用体验，推荐使用分辨率大于 1440 x 810 的显示器。
