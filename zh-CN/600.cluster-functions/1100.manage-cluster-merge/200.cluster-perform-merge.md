# 执行合并

当集群处于 **空闲** 状态时，您可以立即触发一次合并。当集群出现合并错误，排查完合并错误后可清除异常以便继续进行合并。

## 前提条件

* 请确保当前登录 OCP 的用户具备如下权限：

  * **集群维护** 资源权限。
  * 集群 **合并管理** 菜单权限。

* 当 OceanBase 为 V4.0 及以上版本时，不再支持集群级别的合并操作。集群下的合并操作仅用于批量对集群中的主租户发起合并，备租户的合并是同步主租户的合并状态后主动发起的，不支持手动发起合并。

* `enable_manual_merge` 参数用于设置是否开启手工合并。当 OceanBase 集群为 V1.x~V3.x 版本时，触发合并之前需确保 **集群 > 参数管理** 中 `enable_manual_merge` 的参数值为 False，或者在 `enable_manual_merge` 为 True 的情况下通过 SQL 命令手动执行合并流程，具体操作详情可参考 [手动控制合并](https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-0000000001417800)。

## 操作步骤

1. 登录 OCP 。

2. 在左侧导航栏单击 **集群** ，系统默认进入 **集群列表** 页签。

3. 在 **集群列表** 中选择待操作的集群并单击其集群名，进入集群 **概览** 页面。

4. 在显示的页面的左侧导航栏上，单击 **合并管理** 。

5. 在 **合并详情** 页签的 **基本信息** 的区域查看合并信息。

   ![执行合并](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/%E5%90%88%E5%B9%B6%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF1.png)

6. 确认 **状态** 为 **空闲** 后，单击 **发起合并**，系统将对集群内的所有租户发起合并。

   发起合并后，您可通过 **状态** 后的百分比了解合并进度。

7. 当状态处于 **租户合并中** 时，可单击 **查看租户** 查看正在合并中的租户列表。

8. 当出现租户合并异常时，支持通过 **查看租户** 对合并异常租户进行定位。
   手动分析排查完合并错误之后，可以单击 **清除异常** 用于清除合并错误标记以便继续合并。

   <main id="notice" type='notice'>
   <h4>注意</h4>
   <p>一旦出现合并错误，建议首先联系专业人员确认问题，未排查错误的情况下直接清除合并错误操作可能导致错误范围扩大。</p>
   </main>
