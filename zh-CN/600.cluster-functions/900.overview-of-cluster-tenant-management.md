集群租户管理概览
=============================

您可以查看您管理的集群中所有租户的资源分布信息、租户列表和租户监控 Top5。

**前提条件**
-----------------------------

已具备指定集群的任意权限和其名下租户的管理权限。

**操作步骤**
-----------------------------

1. 登录 OCP 。

2. 在左侧导航栏单击 **集群**，系统默认进入 **集群列表** 页签。

3. 在 **集群列表** 中选择待操作的集群并单击其集群名，进入集群 **概览** 页面。

4. 在显示的页面的左侧导航栏上，单击 **租户管理**，进入 **租户管理** 页面。

5. 单击 **新建租户** ，参考 [新建租户](../500.quickstart/600.quickstart-create-a-tenant.md) 配置并提交，为该集群新建租户。

6. 在 **容量使用总览** 模块，查看资源分布信息。

   资源分布信息主要包括各租户占用集群中 CPU 、内存、日志盘和数据盘资源的百分比，以及系统剩余 CPU 、内存、日志盘和数据盘资源的百分比。

   将光标悬停在某个租户在饼图中的位置时，会显示该租户占用资源的具体数值；单击 **数据盘** 右上角 **查看使用趋势** 按钮，可根据时间进行筛选某一时间段内的数据盘使用趋势。

   <main id="notice" type='explain'>
   <h4>说明</h4>
   <p><ul><li>当租户所属集群开启 CPU 超卖时，<b>容量使用总览</b> 中将展示集群下各租户的最大 CPU 分配核数和最小 CPU 分配核数。</li><li>当 OceanBase 为 V4.0 以下版本时，不支持查看 <b>日志盘</b> 数据。</li></ul></p>
   </main>

   ![Image 79](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/430/%E5%AE%B9%E9%87%8F%E4%BD%BF%E7%94%A8%E6%80%BB%E8%A7%88.png)

7. 在 **租户列表** 区域，查看所有租户的基本信息，包括租户名、标签、OceanBase 版本号、租户模式、Zone 优先级、是否只读、是否锁定、状态及创建时间等信息。

   * 将光标悬停于租户标签上，可查看该租户的所有标签信息。支持单击编辑图标对标签进行管理，操作详情可参见 [管理标签](../1600.system-management-features/800.manage-tags/100.tags-overview.md)。
   * 支持对租户进行锁定和复制操作，详情可参见 [锁定租户](../700.tenant-functions/600.manage-a-tenant/300.locked-a-tenant.md) 和 [复制租户](../700.tenant-functions/600.manage-a-tenant/200.replication-a-tenant.md)。

   ![16](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/422/%E7%A7%9F%E6%88%B7%E5%88%97%E8%A1%A8-1.png)

8. 在 **租户性能 TOP5** 区域，可以查看当前集群下工作负载最高的 5 个租户的性能信息，包含 QPS、TPS、SQL 响应时间、事务响应时间、会话数、事件等待_次数、事件等待_时间、容量_表数量、容量_分区数量等性能监控指标。同时，您还可以根据业务需要，查看最近一小时、最近一天或最近一周的监控信息。

   ![18](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4772988061/p200735.png)

   性能监控指标相关说明如下表所示。

   |   指标名    |          说明          |           数据来源            |
   |----------|----------------------|---------------------------|
   | QPS      | 平均每秒处理 SQL 语句数（次/s）  | v$sysstat                 |
   | TPS      | 平均每秒处理事务数（次/s）       | v$sysstat                 |
   | SQL 响应时间 | SQL 响应时间（μs）         | v$sysstat                 |
   | 事务响应时间   | 服务端每个事务平均处理时间（μs）    | v$sysstat                 |
   | 会话数      | 当前活跃会话数（个） 和当前会话数（个） | __all_virtual_processlist |
   | 事件等待_次数  | 平均每秒等待事件数（次/s）       | v$system_event            |
   | 事件等待_时间  | 平均每个等待事件等待的时间（μs）    | v$system_event            |
   | 容量_表数量   | 表数量（个）               | gv$table                  |
   | 容量_分区数量  | 分区数量（个）              | v$partition               |
