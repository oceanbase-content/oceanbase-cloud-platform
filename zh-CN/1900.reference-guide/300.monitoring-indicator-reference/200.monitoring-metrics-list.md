# 监控指标列表

本节介绍 OCP 有哪些监控指标及各指标的含义和计算方法。

|     **指标分组**      |     **指标名称**  |  **指标解释**   |   **计算表达式**     |
|-------------|---------|----------------------------|-------------|
| QPS      | sql_all_count          | 每秒处理 SQL 语句数      | sum(rate(ob_sysstat{stat_id="40000",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40002",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40004",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40006",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40008",@LABELS}[@INTERVAL])) by (@GBLABELS) R_FILL_0_ADD sum(rate(ob_sysstat{stat_id="40018",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| QPS      | sql_select_count       | 每秒处理 Select 语句数   | sum(rate(ob_sysstat{stat_id="40000",@LABELS}[@INTERVAL])) by (@GBLABELS)      |
| QPS      | sql_insert_count       | 每秒处理 Insert 语句数   | sum(rate(ob_sysstat{stat_id="40002",@LABELS}[@INTERVAL])) by (@GBLABELS)        |
| QPS      | sql_update_count       | 每秒处理 Update 语句数   | sum(rate(ob_sysstat{stat_id="40006",@LABELS}[@INTERVAL])) by (@GBLABELS)      |
| QPS      | sql_replace_count      | 每秒处理 Replace 语句数  | sum(rate(ob_sysstat{stat_id="40004",@LABELS}[@INTERVAL])) by (@GBLABELS)       |
| QPS      | sql_delete_count       | 每秒处理 DDL、DCL、DTL 等其他语句数   | sum(rate(ob_sysstat{stat_id="40008",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| QPS      | sql_other_count      | 每秒处理 Delete 语句数   | sum(rate(ob_sysstat{stat_id="40018",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| SQL 响应时间     | sql_all_rt             | 服务端每条 SQL 语句平均处理耗时         | (sum(rate(ob_sysstat{stat_id="40001",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40003",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40005",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40007",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40009",@LABELS}[@INTERVAL])) by (@GBLABELS) R_FILL_0_ADD sum(rate(ob_sysstat{stat_id="40019",@LABELS}[@INTERVAL])) by (@GBLABELS)) / (sum(rate(ob_sysstat{stat_id="40000",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40002",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40004",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40006",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40008",@LABELS}[@INTERVAL])) by (@GBLABELS) R_FILL_0_ADD sum(rate(ob_sysstat{stat_id="40018",@LABELS}[@INTERVAL])) by (@GBLABELS)) |
| SQL 响应时间     | sql_select_rt          | 服务端每条 Select 语句平均处理耗时      | sum(rate(ob_sysstat{stat_id="40001",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40000",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| SQL 响应时间     | sql_insert_rt          | 服务端每条 Insert 语句平均处理耗时      | sum(rate(ob_sysstat{stat_id="40003",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40002",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| SQL 响应时间     | sql_update_rt          | 服务端每条 Update 语句平均处理耗时      | sum(rate(ob_sysstat{stat_id="40007",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40006",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| SQL 响应时间     | sql_replace_rt         | 服务端每条 Replace 语句平均处理耗时     | sum(rate(ob_sysstat{stat_id="40005",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40004",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| SQL 响应时间     | sql_delete_rt          | 服务端每条 Delete 语句平均处理耗时      | sum(rate(ob_sysstat{stat_id="40009",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40008",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| SQL 响应时间     | sql_other_rt          | 服务端处理每条 DDL、DCL、DTL 等其他语句的平均耗时      | sum(rate(ob_sysstat{stat_id="40019",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40000",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| TPS     | tps          | 集群每秒处理事务数      | sum(rate(ob_sysstat{stat_id="30005",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| TPS     | transaction_commit_count          | 集群每秒提交事务数      | sum(rate(ob_sysstat{stat_id="30007",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| TPS     | transaction_rollback_count          | 集群每秒回滚事务数      | sum(rate(ob_sysstat{stat_id="30009",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| TPS     | transaction_timeout_count          | 集群每秒超时事务数      | sum(rate(ob_sysstat{stat_id="30011",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务响应时间     | tps_rt          | 集群处理事务的平均耗时      | sum(rate(ob_sysstat{stat_id="30006",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30005",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务响应时间     | transaction_commit_rt         | 集群提交事务的平均耗时      | sum(rate(ob_sysstat{stat_id="30008",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30007",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务响应时间     | transaction_rollback_rt          | 集群回滚事务的平均耗时      | sum(rate(ob_sysstat{stat_id="30010",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30009",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 请求等待队列耗时     | request_queue_time         | SQL 请求在等待队列中等待耗时     | sum(rate(ob_sysstat{stat_id="20002",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="20001",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 会话数    | active_session         | 集群当前活跃会话数           | sum(ob_active_session_num{@LABELS}) by (@GBLABELS)     |
| 会话数    | all_session         | 集群当前会话数         | sum(ob_all_session_num{@LABELS}) by (@GBLABELS)   |
| 事务数量    | transaction_single_partition_count         | 集群每秒处理普通事务次数         | sum(rate(ob_sysstat{stat_id="30012",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务数量    | transaction_multi_partition_count         | 集群每秒处理分布式事务次数         | sum(rate(ob_sysstat{stat_id="30013",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务日志数    | trans_commit_log_count         | 集群每秒提交的事务日志数         | sum(rate(ob_sysstat{stat_id="30002",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务日志量    | clog_trans_log_total_size         | 集群每秒提交的事务日志大小         | sum(rate(ob_sysstat{stat_id="80057",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务日志耗时    | clog_write_disk_rt         | 集群每次事务日志写盘的平均耗时         | sum(rate(ob_sysstat{stat_id="80041",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="80040",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务日志耗时    | trans_commit_log_sync_rt         | 集群每次事务日志网络同步平均耗时         | sum(rate(ob_sysstat{stat_id="30000",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30001",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 次数    | io_read_count         | 集群每秒读 SSStore 次数         | sum(rate(ob_sysstat{stat_id="60000",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 次数    | io_write_count         | 集群每秒写 SSStore 次数         | sum(rate(ob_sysstat{stat_id="60003",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 次数    | clog_io_read_count         | 集群每秒读 clog 次数         | sum(rate(ob_sysstat{stat_id="80007",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 次数    | clog_io_write_count         | 集群每秒写 clog 次数         | sum(rate(ob_sysstat{stat_id="80001",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 耗时    | io_read_rt         | 集群每次读取 SSStore 的平均耗时         | sum(rate(ob_sysstat{stat_id="60001",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="60000",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 耗时    | io_write_rt         | 集群每次写入 SSStore 的平均耗时         | sum(rate(ob_sysstat{stat_id="60004",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="60003",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 耗时    | clog_io_read_rt         | 集群每次读取 clog 的平均耗时         | sum(rate(ob_sysstat{stat_id="80009",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="80007",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 耗时    | clog_io_write_rt         | 集群每次写入 clog 的平均耗时         | sum(rate(ob_sysstat{stat_id="80003",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="80001",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 吞吐量    | io_read_size         | 集群每秒从 SSStore 读取的数据量         | sum(rate(ob_sysstat{stat_id="60002",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 吞吐量    | io_write_size         | 集群每秒向 SSStore 写入的数据量         | sum(rate(ob_sysstat{stat_id="60005",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 吞吐量    |   clog_io_read_size       | 集群每秒从 clog 读取的数据量         | sum(rate(ob_sysstat{stat_id="80008",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 吞吐量    | clog_io_write_size        | 集群每秒向 clog 写入的数据量         | sum(rate(ob_sysstat{stat_id="80002",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 进程内存    | observer_rss_memory        | 集群 OBServer 节点中进程所占用内存的大小         | sum(process_memory_rss_bytes{name="observer",@LABELS}) by (@GBLABELS)  |
| 进程 CPU 使用率    | observer_process_cpu_percent        | 集群 OBServer 节点中进程 CPU 的使用率         | avg(process_cpu_percent{name="observer",@LABELS}) by (@GBLABELS)  |
| 进程文件句柄    | observer_fd_count       | 集群 OBServer 节点的文件句柄数量         | avg(process_fd_count{name="observer",@LABELS}) by (@GBLABELS)  |
| 进程文件句柄    | observer_fd_usage       | 集群 OBServer 节点文件句柄使用率         | round(100 * avg(process_fd_count{name="observer",@LABELS}) by (@GBLABELS) / avg(observer_ulimit_max_fd_count{@LABELS}) by (@GBLABELS))  |
| 进程线程数    | observer_thread_count       | 集群 OBServer 节点的进程线程数         | avg(process_thread_count{name="observer",@LABELS}) by (@GBLABELS)  |
| 500 租户内存占用    | tenant500_mem_hold       | 集群 500 租户内存占用大小（不包括 OB_KVSTORE_CACHE_MB）         | sum(ob_tenant500_memory_hold_bytes{@LABELS}) by (@GBLABELS) / 1073741824  |
| 500 租户内存占用    | tenant500_mem_hold_percent       | 集群 500 租户内存使用（不包括 OB_KVSTORE_CACHE_MB） / OBServer 内存资源的大小         | 100 * sum(ob_tenant500_memory_hold_bytes{@LABELS}) by (@GBLABELS) / sum(ob_server_resource_memory_bytes{@LABELS}) by (@GBLABELS)  |
| 错误日志    | observer_log_error_count       | 集群 OBServer 节点 ERROR 日志个数        | sum(rate(ob_log_level_count{level="ERROR",logSourceType="observer",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 错误日志    | election_log_error_count       | 集群 OBServer 节点 election ERROR 日志个数        | sum(rate(ob_log_level_count{level="ERROR",logSourceType="election",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 错误日志    | rootservice_log_error_count       | 集群 OBServer 节点 rootservice ERROR 日志个数        | sum(rate(ob_log_level_count{level="ERROR",logSourceType="rootservice",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| QPS    | sql_all_count       | 租户每秒处理 SQL 语句总次数        | sum(rate(ob_sysstat{stat_id="40000",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40002",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40004",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40006",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40008",@LABELS}[@INTERVAL])) by (@GBLABELS) R_FILL_0_ADD sum(rate(ob_sysstat{stat_id="40018",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| QPS    | sql_select_count       | 租户每秒处理 SELECT 语句次数        | sum(rate(ob_sysstat{stat_id="40000",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| QPS    | sql_insert_count       | 租户每秒处理 INSERT 语句次数        | sum(rate(ob_sysstat{stat_id="40002",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| QPS    | sql_update_count       | 租户每秒处理 UPDATE 语句次数        | sum(rate(sysstat_value{metric_group="sysstat",stat_id="40006",@LABELS}[@INTERVAL]) by (@GBLABELS)) by (@GBLABELS)  |
| QPS    | sql_replace_count       | 租户每秒处理 REPLACE 语句次数        | sum(rate(ob_sysstat{stat_id="40004",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| QPS    | sql_delete_count       | 每秒处理 DELETE 语句次数        | sum(rate(ob_sysstat{stat_id="40008",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| QPS    | sql_other_count       | 租户每秒处理 DDL、DCL、DTL 等其他语句次数        | sum(rate(ob_sysstat{stat_id="40018",@LABELS}[@INTERVAL])) by (@GBLABELS) |
| 响应时间    | sql_all_rt       | 租户服务端处理每条 SQL 语句的平均耗时        | (sum(rate(ob_sysstat{stat_id="40001",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40003",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40005",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40007",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40009",@LABELS}[@INTERVAL])) by (@GBLABELS) R_FILL_0_ADD sum(rate(ob_sysstat{stat_id="40019",@LABELS}[@INTERVAL])) by (@GBLABELS)) / (sum(rate(ob_sysstat{stat_id="40000",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40002",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40004",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40006",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="40008",@LABELS}[@INTERVAL])) by (@GBLABELS) R_FILL_0_ADD sum(rate(ob_sysstat{stat_id="40018",@LABELS}[@INTERVAL])) by (@GBLABELS))  |
| 响应时间    | sql_select_rt       | 租户服务端处理每条 select 语句的平均耗时        | sum(rate(ob_sysstat{stat_id="40001",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40000",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 响应时间    | sql_insert_rt       | 租户服务端处理每条 insert 语句的平均耗时        | sum(rate(ob_sysstat{stat_id="40003",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40002",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 响应时间    | sql_update_rt       | 租户服务端处理每条 update 语句的平均耗时        | sum(rate(ob_sysstat{stat_id="40007",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40006",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 响应时间    | sql_replace_rt       | 租户服务端处理每条 replace 语句的平均耗时        | sum(rate(ob_sysstat{stat_id="40005",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40004",@LABELS}[@INTERVAL])) by (@GBLABELS) |
| 响应时间    | sql_delete_rt       | 租户服务端处理每条 Delete 语句的平均耗时        | sum(rate(ob_sysstat{stat_id="40009",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40008",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 响应时间    | sql_other_rt       | 租户服务端处理每条 DDL、DCL、DTL 等其他语句的平均耗时        | sum(rate(ob_sysstat{stat_id="40019",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40000",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| SQL 执行计划类别        | sql_local_count        | 每秒处理本地执行数         | sum(rate(ob_sysstat{stat_id="40010",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| SQL 执行计划类别        | sql_remote_count       | 每秒处理远程执行计划数  | sum(rate(ob_sysstat{stat_id="40011",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| SQL 执行计划类别        | sql_distributed_count   | 每秒处理分布式执行计划数      | sum(rate(ob_sysstat{stat_id="40012",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| SQL 执行时间        | sql_local_time   | 本地 SQL 的执行耗时     | sum(rate(ob_sysstat{stat_id="40116",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40010",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| SQL 执行时间    |  sql_remote_time  | 远程 SQL 的执行耗时    | sum(rate(ob_sysstat{stat_id="40117",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40011",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| SQL 执行时间    |  sql_distributed_time  | 分布式 SQL 的执行耗时    | sum(rate(ob_sysstat{stat_id="40118",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="40012",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 会话数    |  active_session  | 租户当前活跃会话数    | sum(ob_active_session_num{@LABELS}) by (@GBLABELS)  |
| 会话数    |  all_session  | 租户当前会话总数    | sum(ob_all_session_num{@LABELS}) by (@GBLABELS)  |
| 等待事件    |  wait_event_count  | 租户每秒发生的等待事件次数    | sum(rate(ob_waitevent_wait_total{@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件    |  system_event_application_total_waits  | 租户每秒发生的 application 等待事件次数    | sum(rate(ob_system_event_total_waits{event_group="APPLICATION",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件    |  system_event_configuration_total_waits  | 租户每秒发生的 configuration 事件次数    | sum(rate(ob_system_event_total_waits{event_group="CONFIGURATION",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件    |  system_event_administrative_total_waits  | 租户每秒发生的 administrative 等待事件次数    | sum(rate(ob_system_event_total_waits{event_group="ADMINISTRATIVE",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件    |  system_event_concurrency_total_waits  | 租户每秒发生的 concurrency 等待事件次数    | sum(rate(ob_system_event_total_waits{event_group="CONCURRENCY",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件    |  system_event_commit_total_waits  | 租户每秒发生的 commit 等待事件次数    | sum(rate(ob_system_event_total_waits{event_group="COMMIT",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件    |  system_event_network_total_waits  | 租户每秒发生的 network 等待事件次数    | sum(rate(ob_system_event_total_waits{event_group="NETWORK",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件    |  system_event_user_io_total_waits  | 租户每秒发生的 user_io 等待事件次数    | sum(rate(ob_system_event_total_waits{event_group="USER_IO",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件    |  ystem_event_system_io_total_waits  | 租户每秒发生的 system_io 等待事件次数    | sum(rate(ob_system_event_total_waits{event_group="SYSTEM_IO",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件    |  system_event_cluster_total_waits  | 租户每秒发生的 cluster 等待事件次数    | sum(rate(ob_system_event_total_waits{event_group="CLUSTER",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件    |  system_event_other_total_waits  | 租户每秒发生的其他等待事件次数    | sum(rate(ob_system_event_total_waits{event_group="OTHER",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 等待事件耗时   | wait_event_rt          | 租户的等待事件平均等待耗时        | sum(rate(ob_waitevent_wait_seconds_total{@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_waitevent_wait_total{@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 等待事件耗时   | system_event_internal_time_waited          | 租户的内部等待事件的平均等待耗时        | sum(rate(ob_system_event_time_waited{event_group="INTERNAL",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 等待事件耗时   | system_event_sync_rpc_total_waits          | 租户同步 RPC 等待事件的平均等待耗时        | sum(rate(ob_system_event_total_waits{event_group="SYNC_RPC",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 等待事件耗时   | system_event_row_lock_wait_total_waits          | 租户锁等待事件的平均等待耗时        | sum(rate(ob_system_event_total_waits{event_group="ROW_LOCK_WAIT",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 等待事件耗时   | system_event_io_total_waits          | 租户 IO 等待事件的平均等待耗时        | sum(rate(ob_system_event_total_waits{event_group="IO",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 等待事件耗时   | system_event_latch_total_waits          | 租户 Latch 等待事件的平均等待耗时        | sum(rate(ob_system_event_total_waits{event_group="LATCH",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 等待事件耗时   | system_event_other_time_waited          | 租户其他等待事件的平均等待耗时        | sum(rate(ob_system_event_total_waits{event_group="OTHER",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 请求等待队列   | request_queue_count    | 平均每秒进入等待队列的 SQL 数         | sum(rate(ob_sysstat{stat_id="20000",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 请求等待队列   | request_queue_count    | SQL 在等待队列中平均等待耗时        | sum(rate(ob_sysstat{stat_id="20001",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 请求等待队列耗时          | request_queue_time     | SQL 在等待队列中等待耗时    | sum(rate(ob_sysstat{stat_id="20002",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="20001",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 请求等待队列大小         | ob_tenant_request_queue_size    | 租户请求队列长度    | sum(rate(ob_tenant_request_queue_total_size{@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| 请求等待队列大小         | ob_tenant_request_queue_large_size    | 租户大查询队列大小    | sum(rate(ob_tenant_request_queue_large_size{@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| 租户 CPU 消耗         | ob_tenant_cpu_percent   | 租户大查询队列大小    | sum(rate(ob_sysstat{stat_id="140013",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(ob_sysstat{stat_id="140005",@LABELS}) by (@GBLABELS) / 100  |
| 租户线程使用率         | ob_tenant_thread_percent   | 活跃线程数 / 租户的最大线程数    | 100 * sum(ob_sysstat{stat_id="140006",@LABELS}) by (@GBLABELS) / sum(ob_sysstat{stat_id="140005",@LABELS}) by (@GBLABELS)  |
| 内存使用率         | ob_memory_percent   | 租户的内存使用率    | 100 * avg(ob_sysstat{stat_id="140003",@LABELS}) by (@GBLABELS) / avg(ob_sysstat{stat_id="140002",@LABELS}) by (@GBLABELS)  |
| MEMStore 使用百分比         | Memstore_percent   | 租户 MEMStore 的使用率    | 100 * sum(ob_sysstat{stat_id="130001",@LABELS}) by (@GBLABELS) / sum(ob_sysstat{stat_id="130004",@LABELS}) by (@GBLABELS)  |
| MEMStore 使用百分比         | Active_memstore_percent   | 租户 MEMStore 使用占触发冻结的百分比   | 100 * sum(ob_sysstat{stat_id="130000",@LABELS}) by (@GBLABELS) / sum(ob_sysstat{stat_id="130002",@LABELS}) by (@GBLABELS) |
| RPC 包耗时         | rpc_packet_in_rt   | 租户收 RPC 包平均耗时   | (sum(rate(ob_sysstat{stat_id="10005",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="10006",@LABELS}[@INTERVAL])) by (@GBLABELS)) / sum(rate(ob_sysstat{stat_id="10000",@LABELS}[@INTERVAL])) by (@GBLABELS) |
| RPC 包耗时         | rpc_packet_out_rt   | 租户发 RPC 包平均耗时   | (sum(rate(ob_sysstat{stat_id="10005",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="10006",@LABELS}[@INTERVAL])) by (@GBLABELS)) / sum(rate(ob_sysstat{stat_id="10002",@LABELS}[@INTERVAL])) by (@GBLABELS) |
| RPC 包吞吐量        | rpc_packet_in   | 租户收 RPC 包的总数据量   | sum(rate(ob_sysstat{stat_id="10001",@LABELS}[@INTERVAL])) by (@GBLABELS) |
| RPC 包吞吐量        | rpc_packet_out   | 租户发 RPC 包的总数据量   | sum(rate(ob_sysstat{stat_id="10003",@LABELS}[@INTERVAL])) by (@GBLABELS) |
| 打开的游标数       | opened_cursors_count   | 租户 session 缓存的游标数   | sum(delta(ob_sysstat{stat_id="40030",@LABELS}[@INTERVAL])) by (@GBLABELS) |
| clog 同步延迟       | max_full_clog_sync_delay_seconds   | 租户日志型副本 clog 同步最大延迟   | max(ob_clog_max_sync_delay_seconds{replica_type="0",@LABELS}) by (@GBLABELS) |
| clog 同步延迟       | max_readonly_clog_sync_delay_seconds  | 租户全能型副本 clog 同步最大延迟   | max(ob_clog_max_sync_delay_seconds{replica_type="16",@LABELS}) by (@GBLABELS) |
| TPS      | tps      | 租户每秒处理总事务数         | sum(rate(ob_sysstat{stat_id="30005",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| TPS      | transaction_commit_count      | 租户每秒提交事务数        | sum(rate(ob_sysstat{stat_id="30007",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| TPS      | transaction_rollback_count      | 租户每秒回滚事务数        | sum(rate(ob_sysstat{stat_id="30009",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| TPS      | transaction_timeout_count      | 租户每秒超时事务数           | sum(rate(ob_sysstat{stat_id="30011",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| 事务响应时间   | trans_sp_total_used_time        | 本地事务响应时间     | sum(rate(ob_sysstat{stat_id="30080",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30012",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| 事务响应时间   | trans_distributed_total_used_time        | 租户处理所有事务的平均耗时     | sum(rate(ob_sysstat{stat_id="30081",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30013",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| 事务响应时间明细   | tps_rt       | 分布式事务响应时间     | sum(rate(ob_sysstat{stat_id="30006",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30005",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| 事务响应时间明细   | transaction_commit_rt       | 租户成功提交的事务的平均处理耗时     | sum(rate(ob_sysstat{stat_id="30008",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30007",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| 事务响应时间明细   | transaction_rollback_rt       | 租户回滚事务的平均处理耗时     | sum(rate(ob_sysstat{stat_id="30010",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30009",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| 事务日志数    | trans_commit_log_count          | 每秒提交的事务日志数        | sum(rate(ob_sysstat{stat_id="30002",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 事务日志量    | clog_trans_log_total_size       | 每秒提交的事务日志大小       | sum(rate(ob_sysstat{stat_id="80057",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 事务日志耗时   | trans_commit_log_sync_rt        | 每次事务日志网络同步平均耗时    | sum(rate(ob_sysstat{stat_id="30000",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30001",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| 事务日志耗时   | clog_write_disk_rt       | 每次事务日志写盘的平均耗时    | sum(rate(ob_sysstat{stat_id="80041",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="80040",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 事务锁等待次数      | memstore_write_lock_succ_count  | 写锁等待成功次数          | sum(rate(ob_sysstat{stat_id="60021",@LABELS}[@INTERVAL])) by (@GBLABELS)       |
| 事务锁等待次数      | memstore_write_lock_fail_count  | 写锁等待失败次数          | ssum(rate(ob_sysstat{stat_id="60022",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| 事务锁平均等待时间     | memstore_write_lock_wait_time   | 事务锁平均等待耗时        | sum(rate(ob_sysstat{stat_id="60023",@LABELS}[@INTERVAL])) by (@GBLABELS) / (sum(rate(ob_sysstat{stat_id="60021",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(rate(ob_sysstat{stat_id="60022",@LABELS}[@INTERVAL])) by (@GBLABELS))  |
| 事务数量     | transaction_single_partition_count   | 租户每秒处理普通事务次数        | sum(rate(ob_sysstat{stat_id="30012",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务数量     | transaction_multi_partition_count   | 租户每秒处理分布式事务次数       | sum(rate(ob_sysstat{stat_id="30013",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务表读请求命中数     | tx_data_hit_mini_cache_count   | 事务表读请求命中 mini cache 数量      | sum(rate(ob_sysstat{stat_id="30082",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务表读请求命中数     | tx_data_hit_kv_cache_count   | 事务表读请求命中 mini cache 数量      | sum(rate(ob_sysstat{stat_id="30083",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务表读请求命中数     | tx_data_read_tx_ctx_count   | 事务表读请求命中事务上下文表数量      | sum(rate(ob_sysstat{stat_id="30084",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务表读请求命中数     | tx_data_read_tx_data_memtable_count   | 事务表读请求命中 memtable 数量     | sum(rate(ob_sysstat{stat_id="30085",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 事务表读请求命中数     | tx_data_read_tx_data_sstable_count   | 事务表读请求命中 sstable 数量    | sum(rate(ob_sysstat{stat_id="30086",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 分区     | tenant_partition_leader_absent_count   | 租户无主分区个数量    | max(partition_leader_absent_count{@LABELS}) by (@GBLABELS)  |
| 分区     | tenant_partition_replica_absent_count   | 租户缺副本分区个数    | max(partition_replica_absent_count{@LABELS}) by (@GBLABELS)  |
| XA 事务数     | xa_trans_start_count   | 租户中已经成功开启的 XA 事务总个数（包含已经结束的）    | sum(rate(ob_sysstat{stat_id="30220",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 事务数     | xa_read_only_trans_total_count   | 租户中只读的 XA 事务总个数   | sum(rate(ob_sysstat{stat_id="30221",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 事务数     | xa_one_phase_commit_total_count   | 租户中采用一阶段提交的 XA 事务总个数    | sum(rate(ob_sysstat{stat_id="30222",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 语句数     | xa_start_total_count   | 租户中 xa_start 语句个数    | sum(rate(ob_sysstat{stat_id="30200",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 语句数     | xa_end_total_count   | 租户中 xa_end 语句个数    | sum(rate(ob_sysstat{stat_id="30204",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 语句数     | xa_prepare_total_count   | 租户中 xa_prepare 语句个数    | sum(rate(ob_sysstat{stat_id="30208",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 语句数     | xa_commit_total_count   | 租户中 xa_commit 语句个数    | sum(rate(ob_sysstat{stat_id="30212",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 语句数     | xa_rollback_total_count   | 租户中 xa_rollback 语句个数    | sum(rate(ob_sysstat{stat_id="30216",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 语句耗时     | xa_start_total_rt   | 租户 xa_start 语句耗时    | sum(rate(ob_sysstat{stat_id="30201",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30200",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 语句耗时     | xa_end_total_rt   | 租户 xa_end 语句耗时    | sum(rate(ob_sysstat{stat_id="30205",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30204",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 语句耗时     | xa_prepare_total_rt   | 租户 xa_prepare 语句耗时    | sum(rate(ob_sysstat{stat_id="30209",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30208",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 语句耗时     | xa_commit_total_rt   | 租户 xa_commit 语句耗时    | sum(rate(ob_sysstat{stat_id="30213",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30212",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| XA 语句耗时     | xa_rollback_total_rt   | 租户 xa_rollback 语句耗时    | sum(rate(ob_sysstat{stat_id="30217",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="30216",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| MEMStore          | total_memstore_used    | 为租户准备的 MEMStore 的大小     | sum(ob_sysstat{stat_id="130001",@LABELS}) by (@GBLABELS) / 1048576   |
| MEMStore          | active_memstore_used            | 活跃 MemStore 大小    | sum(ob_sysstat{stat_id="130000",@LABELS}) by (@GBLABELS) / 1048576   |
| MEMStore          | major_freeze_trigger            | 触发合并的 MEMStore 大小    | sum(ob_sysstat{stat_id="130002",@LABELS}) by (@GBLABELS) / 1048576   |
| MEMStore          | memstore_limit            | MEMStore 的 最大使用限制   | sum(ob_sysstat{stat_id="130004",@LABELS}) by (@GBLABELS) / 1048576  |
| 物理 IO 次数    | io_read_count          | 租户每秒读 SSStore 次数     | sum(rate(ob_sysstat{stat_id="60000",@LABELS}[@INTERVAL])) by (@GBLABELS)         |
| 物理 IO 次数    | io_write_count         | 租户每秒写 SSStore 次数    | sum(rate(ob_sysstat{stat_id="60003",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 物理 IO 次数    | clog_io_read_count         | 租户每秒读 clog 次数   | sum(rate(ob_sysstat{stat_id="80007",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 物理 IO 次数    | clog_io_write_count       | 租户每秒写 clog 次数    | sum(rate(ob_sysstat{stat_id="80001",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 物理 IO 耗时    | io_read_rt             | 租户每次读取 SSStore 的平均耗时  | sum(rate(ob_sysstat{stat_id="60001",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="60000",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 物理 IO 耗时    | io_write_rt            | 租户每次写入 SSStore 的平均耗时  | sum(rate(ob_sysstat{stat_id="60004",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="60003",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| 物理 IO 耗时    | clog_io_read_rt            | 租户每次读取 clog 的平均耗时  | sum(rate(ob_sysstat{stat_id="80009",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="80007",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| 物理 IO 耗时    | clog_io_write_rt            | 租户每次写入 clog 的平均耗时  | sum(rate(ob_sysstat{stat_id="80003",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="80001",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| IO 吞吐量   | io_read_size           | 租户每秒从 SSStore 读取的数据量   | sum(rate(ob_sysstat{stat_id="60002",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| IO 吞吐量   | io_write_size       | 租户每秒向 SSStore 写入的数据量   | sum(rate(ob_sysstat{stat_id="60005",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| IO 吞吐量   | clog_io_read_size          | 租户每秒从 clog 读取的数据量   | sum(rate(ob_sysstat{stat_id="80008",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| IO 吞吐量   | clog_io_write_size      | 租户每秒向 clog 写入的数据量   | sum(rate(ob_sysstat{stat_id="80002",@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 缓存大小     | block_cache_size       | 块缓存大小    | sum(ob_cache_size_bytes{cache_name="user_block_cache",@LABELS}) by (@GBLABELS)     |
| 缓存大小     | row_cache_size         | 行缓存大小    | sum(ob_sysstat{stat_id="120008",@LABELS}) by (@GBLABELS)       |
| 缓存大小     | plan_cache_size        | 执行计划缓存大小          | sum(ob_plan_cache_memory_bytes{@LABELS}) by (@GBLABELS)          |
| 缓存大小     | clog_cache_size        | 提交日志缓存大小          | sum(ob_sysstat{stat_id="120001",@LABELS}) by (@GBLABELS)          |
| 缓存大小     | bloom_filter_cache_size        | bloomfilter 缓存大小          | sum(ob_sysstat{stat_id="120009",@LABELS}) by (@GBLABELS)          |
| 缓存大小     | location_cache_size       | location 缓存大小          | sum(ob_sysstat{stat_id="120000",@LABELS}) by (@GBLABELS)         |
| 缓存命中率    | block_cache_hit_ratio           | 块缓存命中率            | 100 * 1 / (1 + sum(rate(ob_sysstat{stat_id="50009",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="50008",@LABELS}[@INTERVAL])) by (@GBLABELS))        |
| 缓存命中率    | row_cache_hit_ratio    | 行缓存命中率      | 100 * 1 / (1 + sum(rate(ob_sysstat{stat_id="50001",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="50000",@LABELS}[@INTERVAL])) by (@GBLABELS))        |
| 缓存命中率    | plan_cache_hit_ratio            | 执行计划缓存命中率         | 100 * sum(rate(ob_plan_cache_hit_total{@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_plan_cache_access_total{@LABELS}[@INTERVAL])) by (@GBLABELS)      |
| 缓存命中率    | clog_cache_hit_ratio            | 提交日志缓存命中率        | 100 * 1 / (1 + sum(rate(ob_sysstat{stat_id="50038",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="50037",@LABELS}[@INTERVAL])) by (@GBLABELS))     |
| 缓存命中率    | bloom_filter_cache_hit_ratio       | bloomfilter 缓存命中率       | 100 * 1 / (1 + sum(rate(ob_sysstat{stat_id="50005",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="50004",@LABELS}[@INTERVAL])) by (@GBLABELS))      |
| 缓存命中率    | location_cache_hit_ratio         | location 缓存命中率         | 100 * 1 / (1 + sum(rate(ob_sysstat{stat_id="50011",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(ob_sysstat{stat_id="50010",@LABELS}[@INTERVAL])) by (@GBLABELS))      |
| 缓存请求次数    | block_cache_req_total        | 块缓存请求次数        | sum(delta(ob_sysstat{stat_id="50008",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(delta(ob_sysstat{stat_id="50009",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| 缓存请求次数    | row_cache_req_total        | 行缓存请求次数      | sum(delta(ob_sysstat{stat_id="50000",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(delta(ob_sysstat{stat_id="50001",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 缓存请求次数    | clog_cache_req_total       | 提交日志缓存请求次数       | sum(delta(ob_sysstat{stat_id="50037",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(delta(ob_sysstat{stat_id="50038",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 缓存请求次数    | bloom_filter_cache_req_total       | bloomfilter 缓存请求次数       | sum(delta(ob_sysstat{stat_id="50004",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(delta(ob_sysstat{stat_id="50005",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 缓存请求次数    | location_cache_req_total        | location 缓存请求次数       | sum(delta(ob_sysstat{stat_id="50010",@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(delta(ob_sysstat{stat_id="50011",@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| TPS    | transaction_total       | OBProxy 集群平均每秒处理事务数       | sum(rate(odp_transaction_total{@LABELS}[@INTERVAL])) by (@GBLABELS)   |
| QPS      | request_total_commit          | 每秒处理 SQL 语句数      | sum(rate(odp_sql_request_total{sqltype="COMMIT", @LABELS}[@INTERVAL])) by (@GBLABELS)        |
| QPS      | request_total_delete         | OBProxy 集群平均每秒转发的 delete 请求数      | sum(rate(odp_sql_request_total{sqltype="DELETE", @LABELS}[@INTERVAL])) by (@GBLABELS)       |
| QPS      | request_total_insert         | OBProxy 集群平均每秒转发的 insert 请求数      | sum(rate(odp_sql_request_total{sqltype="INSERT", @LABELS}[@INTERVAL])) by (@GBLABELS)        |
| QPS      | request_total_large         | OBProxy 集群平均每秒转发的大请求数      | sum(rate(odp_sql_request_total{sqlLarge = "large", @LABELS}[@INTERVAL])) by (@GBLABELS)        |
| QPS      | request_total_select          | OBProxy 集群平均每秒转发的 select 请求数     | sum(rate(odp_sql_request_total{sqltype="SELECT", @LABELS}[@INTERVAL])) by (@GBLABELS)        |
| QPS      | request_total_sequence          | OBProxy 集群平均每秒转发的 sequence 请求数      | sum(rate(odp_sql_request_total{sqltype="SEQUENCE", @LABELS}[@INTERVAL])) by (@GBLABELS)        |
| QPS      | request_total_slow          | OBProxy 集群平均每秒转发的慢请求数      | sum(rate(odp_sql_request_total{slowQuery = "true", @LABELS}[@INTERVAL])) by (@GBLABELS)        |
| QPS      | request_total_update         | OBProxy 集群平均每秒转发的 update 请求数     | sum(rate(odp_sql_request_total{sqltype="UPDATE", @LABELS}[@INTERVAL])) by (@GBLABELS)      |
| QPS      | request_total_others         | OBProxy 集群平均每秒转发的其他请求数     | sum(rate(odp_sql_request_total{sqltype="OTHERS", @LABELS}[@INTERVAL])) by (@GBLABELS)      |
| 客户端连接数      | current_session_client       | OBProxy 集群当前时间点与客户端建立的连接数    | sum(odp_current_session{sessionType="client",@LABELS}) by (@GBLABELS)     |
| 客户端连接数      | client_connection_used_percent      | OBProxy 客户端连接数 / client_max_connections    | 100 * sum(odp_current_session{sessionType="client",@LABELS}) by (@GBLABELS) / sum(obproxy_client_max_connections{@LABELS}) by (@GBLABELS)     |
| 服务端连接数  |  current_session_server          | OBProxy 集群当前时间点与服务端建立的连接数       | sum(odp_current_session{sessionType="server",@LABELS}) by (@GBLABELS)          |
| 服务端连接数  |  server_connection_used_percent          | OBProxy 服务端连接数 / max_connections       | 100 * sum(odp_current_session{sessionType="server",@LABELS}) by (@GBLABELS) / sum(obproxy_server_max_connections{@LABELS}) by (@GBLABELS)       |
| 平均每条 SQL 响应时间 | request_cost_commit    | 平均每次 commit 请求耗时  | sum(rate(odp_sql_cost_total{timeType="total",sqltype="COMMIT", @LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(odp_sql_request_total{sqltype="COMMIT", @LABELS}[@INTERVAL])) by (@GBLABELS)          |
| 平均每条 SQL 响应时间 | request_cost_delete    | 平均每次 delete 请求耗时  | sum(rate(odp_sql_cost_total{timeType="total",sqltype="DELETE", @LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(odp_sql_request_total{sqltype="DELETE", @LABELS}[@INTERVAL])) by (@GBLABELS)           |
| 平均每条 SQL 响应时间 | request_cost_insert    | 平均每次 insert 请求耗时  | sum(rate(odp_sql_cost_total{timeType="total",sqltype="INSERT", @LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(odp_sql_request_total{sqltype="INSERT", @LABELS}[@INTERVAL])) by (@GBLABELS)          |
| 平均每条 SQL 响应时间 | request_cost_prepare_send_request_time   | 平均每次请求发送准备耗时      | sum(rate(odp_sql_cost_total{timeType="prepare", @LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(odp_sql_request_total{@LABELS}[@INTERVAL])) by (@GBLABELS)              |
| 平均每条 SQL 响应时间 | request_cost_server_process_request_time | 平均每次服务端处理请求耗时     | sum(rate(odp_sql_cost_total{timeType="server", @LABELS}[@INTERVAL])) by (@GBLABELS) / sum(rate(odp_sql_request_total{@LABELS}[@INTERVAL])) by (@GBLABELS)               |
| 平均每条 SQL 响应时间 | request_cost_select    | 平均每次 select 请求耗时  | sum(rate(odp_sql_cost_total{timeType="total",sqltype="SELECT", @LABELS}\[@INTERVAL\]) by (@GBLABELS)) by (@GBLABELS) / sum(rate(odp_sql_request_total{sqltype="SELECT", @LABELS}\[@INTERVAL\]) by (@GBLABELS)) by (@GBLABELS)           |
| 平均每条 SQL 响应时间 | request_cost_sequence           | 平均每次 sequence 请求耗时         | sum(rate(odp_sql_cost_total{timeType="total",sqltype="SEQUENCE", @LABELS}\[@INTERVAL\]) by (@GBLABELS)) by (@GBLABELS) / sum(rate(odp_sql_request_total{sqltype="SEQUENCE", @LABELS}\[@INTERVAL\]) by (@GBLABELS)) by (@GBLABELS)       |
| 平均每条 SQL 响应时间 | request_cost_update    | 平均每次 update 请求耗时  | sum(rate(odp_sql_cost_total{timeType="total",sqltype="UPDATE", @LABELS}\[@INTERVAL\]) by (@GBLABELS)) by (@GBLABELS) / sum(rate(odp_sql_request_total{sqltype="UPDATE", @LABELS}\[@INTERVAL\]) by (@GBLABELS)) by (@GBLABELS)           |
| 平均每条 SQL 响应时间 | request_cost_others    | 平均每次其他请求耗时        | sum(rate(odp_sql_cost_total{sqltype="OTHERS", @LABELS}\[@INTERVAL\]) by (@GBLABELS)) by (@GBLABELS) / sum(rate(odp_sql_request_total{sqltype="OTHERS", @LABELS}\[@INTERVAL\]) by (@GBLABELS)) by (@GBLABELS)          |
| OBProxy 内存 | obproxy_rss_memory    | OBProxy 进程常驻内存大小      | sum(process_memory_rss_bytes{name="obproxy",@LABELS}) by (@GBLABELS)       |
| OBProxy 内存 | obproxy_rss_mem_used_percent    | OBProxy 进程常驻内存 / proxy_mem_limited      | 100 * sum(process_memory_rss_bytes{name="obproxy",@LABELS}) by (@GBLABELS) / sum(obproxy_memory_limit_bytes{@LABELS}) by (@GBLABELS)     |
| OBProxy 进程 CPU 使用率 | obproxy_process_cpu_percent    | OBProxy 进程 CPU 使用率    | avg(process_cpu_percent{name="obproxy",@LABELS}) by (@GBLABELS)     |
| OBProxy 文件句柄数 | obproxy_fd_count   | OBProxy 文件句柄数    | avg(process_fd_count{name="obproxy",@LABELS}) by (@GBLABELS)     |
| OBProxy 线程数 | obproxy_thread_count   | OBProxy 进程线程数    | avg(process_thread_count{name="obproxy",@LABELS}) by (@GBLABELS)     |
| 错误日志个数 | obproxy_log_error_count   | OBProxy 错误日志个数   | sum(rate(obproxy_log_level_count{level="ERROR",logSourceType="obproxy_error",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| 平均每秒路由表查询次数      | entry_total_hit        | 平均每秒路由表命中次数       | sum(rate(odp_entry_total{routeHit="true",@LABELS}[@INTERVAL])) by (@GBLABELS)             |
| 平均每秒路由表查询次数       | entry_total_partition           | 平均每秒查询 partition entry 的次数 | sum(rate(odp_entry_total{entryType="partition_entry",@LABELS}[@INTERVAL])) by (@GBLABELS)           |
| 平均每秒路由表查询次数      | entry_total_route      | 平均每秒查询 route entry 的次数     | sum(rate(odp_entry_total{entryType="route",@LABELS}[@INTERVAL])) by (@GBLABELS)       |
| 平均每秒路由表查询次数      | entry_total_success    | 平均每秒路由表查询成功次数     | sum(rate(odp_entry_total{routeResult="true",@LABELS}[@INTERVAL])) by (@GBLABELS)         |
| 平均每秒路由表查询次数      | entry_total_table      | 平均每秒查询 table entry 的次数     | sum(rate(odp_entry_total{entryType="table_entry",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| 平均每次网络请求或响应字节数 | request_byte_client_request     | 客户端 request 字节数   | sum(rate(odp_request_byte{sessionType="client",transType="request",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| 平均每次网络请求或响应字节数 | request_byte_client_response    | 客户端 reponse 字节数   | sum(rate(odp_request_byte{sessionType="client",transType="response",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| 平均每次网络请求或响应字节数 | request_byte_server_request     | 服务端 request 字节数   | sum(rate(odp_request_byte{sessionType="server",transType="request",@LABELS}[@INTERVAL])) by (@GBLABELS)     |
| 平均每次网络请求或响应字节数 | request_byte_server_response    | 服务端 response 字节数  | sum(rate(odp_request_byte{sessionType="server",transType="response",@LABELS}[@INTERVAL])) by (@GBLABELS)    |
| Linux 系统负载 | load1   | 过去 1 分钟系统平均负载  | avg(node_load1{@LABELS}) by (@GBLABELS)   |
| Linux 系统负载 | load5   | 过去 5 分钟系统平均负载  | avg(node_load5{@LABELS}) by (@GBLABELS)   |
| Linux 系统负载 | load15   | 过去 15 分钟系统平均负载  | avg(node_load15{@LABELS}) by (@GBLABELS)  |
| Linux 系统负载 | load1_per_cpu   | 过去 1 分钟系统平均负载/CPU 核数  | sum(node_load1{@LABELS}) by (@GBLABELS) / sum(cpu_count{@LABELS}) by (@GBLABELS)   |
| CPU 使用率  | ob_cpu_percent         | 租户的 CPU 使用率       | 100 * (1 - sum(rate(node_cpu_seconds_total{mode=~"idle\|iowait\|steal",@LABELS}[@INTERVAL])) by (@GBLABELS) / sum(cpu_count{@LABELS}) by (@GBLABELS))         |
| IO 使用率  | io_util         | IO 使用率      | avg(io_util{@LABELS}) by (@GBLABELS)       |
| IO 队列长度  | io_qusize         | IO 队列长度      | sum(delta(node_disk_io_time_weighted_seconds_total{@LABELS}[@INTERVAL])) by (@GBLABELS)       |
| IOPS  | io_read        | 每秒读盘次数     | avg(rate(node_disk_reads_completed_total{@LABELS}[@INTERVAL])) by (@GBLABELS)      |
| IOPS  | io_write       | 每秒写盘次数     | avg(rate(node_disk_writes_completed_total{@LABELS}[@INTERVAL])) by (@GBLABELS)      |
| IO 耗时  | io_read_time       | 平均每次读取耗时     | 1000000 * (avg(rate(node_disk_read_time_seconds_total{@LABELS}[@INTERVAL])) by (@GBLABELS)) / (avg(rate(node_disk_reads_completed_total{@LABELS}[@INTERVAL])) by (@GBLABELS))    |
| IO 耗时  | io_read_time       | 平均每次读取耗时     | 1000000 * (avg(rate(node_disk_read_time_seconds_total{@LABELS}[@INTERVAL])) by (@GBLABELS)) / (avg(rate(node_disk_reads_completed_total{@LABELS}[@INTERVAL])) by (@GBLABELS))    |
| IO 吞吐量  | io_read_byte      | 平均每秒从磁盘读取的数据量     | avg(rate(node_disk_read_bytes_total{@LABELS}[@INTERVAL])) by (@GBLABELS) / 1048576  |
| IO 吞吐量  | io_write_byte     | 平均每秒向磁盘写入的数据量     | avg(rate(node_disk_written_bytes_total{@LABELS}[@INTERVAL])) by (@GBLABELS) / 1048576  |
| 网络吞吐率  | net_recv     | 每秒接收数据量     | avg(rate(node_network_receive_bytes_total{device!="lo",@LABELS}[@INTERVAL])) by (@GBLABELS) / 1048576  |
| 网络吞吐率  | net_send     | 每秒发送数据量     | avg(rate(node_network_transmit_bytes_total{device!="lo",@LABELS}[@INTERVAL])) by (@GBLABELS) / 1048576  |
| TCP 重传率  | tcp_retrans_percent     | 主机 TCP 的重传率     | max(tcp_retrans{@LABELS}) by (@GBLABELS)  |
| 网络收发包  | net_receive_drop_count     | 服务器网络丢包次数     | sum(rate(node_network_receive_drop_total{@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| 网络收发包  | net_traffic_err_count     | 服务器网络收发包出错次数     | sum(delta(node_network_receive_errs_total{@LABELS}[@INTERVAL])) by (@GBLABELS) + sum(delta(node_network_transmit_errs_total{@LABELS}[@INTERVAL])) by (@GBLABELS)  |
| NTP 时钟偏移  | ntp_offset_milliseconds     | 服务器 NTP 时钟偏移数据     | max(abs(node_ntp_offset_seconds{@LABELS})) by (@GBLABELS) * 1000  |
| Inode 使用率  | file_inode_usage     | 服务器 inode 使用率     | round(100 - 100 * sum(node_filesystem_files_free{@LABELS}) by (@GBLABELS) / sum(node_filesystem_files{@LABELS}) by (@GBLABELS))  |
| 内存  | memory_used     | 主机中已使用物理内存的大小     | (avg(node_memory_MemTotal_bytes{@LABELS}) by (@GBLABELS) - avg(node_memory_MemFree_bytes{@LABELS}) by (@GBLABELS) - avg(node_memory_Cached_bytes{@LABELS}) by (@GBLABELS) - avg(node_memory_Buffers_bytes{@LABELS}) by (@GBLABELS)) / 1073741824 |
| 内存  | memory_buffers     | 主机中内核 Buffer Cache 的大小     | avg(node_memory_Buffers_bytes{@LABELS}) by (@GBLABELS) / 1073741824 |
| 内存  | memory_free    | 主机中空闲可用物理内存的大小     | avg(node_memory_MemFree_bytes{@LABELS}) by (@GBLABELS) / 1073741824 |
| 内存  | memory_cached     | 主机中 cached 的大小     | avg(node_memory_Cached_bytes{@LABELS}) by (@GBLABELS) / 1073741824 |
| 内存使用率  | memory_percent     | 主机中已使用物理内存的使用率     | (1 - (avg(node_memory_MemFree_bytes{@LABELS}) by (@GBLABELS) + avg(node_memory_Cached_bytes{@LABELS}) by (@GBLABELS) + avg(node_memory_Buffers_bytes{@LABELS}) by (@GBLABELS) + avg(node_memory_SReclaimable_bytes{@LABELS}) by (@GBLABELS)) / avg(node_memory_MemTotal_bytes{@LABELS}) by (@GBLABELS)) * 100 |
| 磁盘  | host_disk_used     | 磁盘分区已使用容量     | sum(node_filesystem_size_bytes{@LABELS} - node_filesystem_avail_bytes{@LABELS}) by (@GBLABELS) / 1073741824 |
| 进程常驻内存  | observer_rss_memory    | observer 进程常驻内存大小     | sum(process_memory_rss_bytes{name="observer",@LABELS}) by (@GBLABELS) |
| 进程常驻内存  | obproxy_rss_memory    | obproxy 进程常驻内存大小     | sum(process_memory_rss_bytes{name="obproxy",@LABELS}) by (@GBLABELS) |
| 进程常驻内存  | monagent_resident_memory    | monagent 进程常驻内存大小     | sum(process_memory_rss_bytes{name="ocp_monagent",@LABELS}) by (@GBLABELS) |
| 进程常驻内存  | mgragent_resident_memory    | mgragent 进程常驻内存大小     | sum(process_memory_rss_bytes{name="ocp_mgragent",@LABELS}) by (@GBLABELS) |
| 进程 CPU 使用率  | observer_process_cpu_percent    | obproxy 进程 CPU 使用率     | avg(process_cpu_percent{name="observer",@LABELS}) by (@GBLABELS) |
| 进程 CPU 使用率  | obproxy_process_cpu_percent    | observer 进程 CPU 使用率     | avg(process_cpu_percent{name="obproxy",@LABELS}) by (@GBLABELS) |
| 进程 CPU 使用率  | monagent_process_cpu_percent    | OCP 监控 Agent 进程 CPU 使用率     | avg(process_cpu_percent{name="ocp_monagent",@LABELS}) by (@GBLABELS) |
| 进程 CPU 使用率  | mgragent_process_cpu_percent    | OCP 管理 Agent 进程 CPU 使用率     | avg(process_cpu_percent{name="ocp_mgragent",@LABELS}) by (@GBLABELS) |
| 进程文件句柄数  | observer_fd_count    | OBServer 文件句柄数     | avg(process_fd_count{name="observer",@LABELS}) by (@GBLABELS) |
| 进程文件句柄数  | oobproxy_fd_count    | monagent 进程文件句柄数     | avg(process_fd_count{name="obproxy",@LABELS}) by (@GBLABELS) |
| 进程文件句柄数  | monagent_open_fd_count    | monagent 进程文件句柄数    | avg(process_fd_count{name="ocp_monagent",@LABELS}) by (@GBLABELS) |
| 进程文件句柄数  | mgragent_open_fd_count   | mgragent 进程文件句柄数     | avg(process_fd_count{name="ocp_mgragent",@LABELS}) by (@GBLABELS) |
| 进程线程数  | observer_thread_count   | observer 进程的线程数量     | avg(process_thread_count{name="observer",@LABELS}) by (@GBLABELS) |
| 进程线程数  | obproxy_thread_count   | OBProxy 进程线程数量     | avg(process_thread_count{name="obproxy",@LABELS}) by (@GBLABELS) |
| 进程线程数  | monagent_thread_count   | monagent 进程线程数量     | avg(process_thread_count{name="ocp_monagent",@LABELS}) by (@GBLABELS) |
| 进程线程数  | mgragent_thread_count   | mgragent 进程线程数量     | avg(process_thread_count{name="ocp_mgragent",@LABELS}) by (@GBLABELS) |
| OCP-Agent 进程协程数  | monagent_goroutine_count   | monagent 进程 GO 协程数量     | max(go_goroutines{process="ocp_monagent",@LABELS}) by (@GBLABELS) |
| OCP-Agent 进程协程数  | mgragent_goroutine_count   | mgragent 进程 GO 协程数量     | max(go_goroutines{process="ocp_mgragent",@LABELS}) by (@GBLABELS) |
