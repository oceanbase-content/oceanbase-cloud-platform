# MEMStore 使用百分比

本节为您介绍 OceanBase 租户的监控指标 MEMStore 使用百分比。您可指定统计范围，查询租户在单个 Zone 或 OBServer 节点的 **MEMStore 使用百分比** 数据。

## Memstore_percent

### 指标介绍

统计范围内，租户 MEMStore 的使用率。

### 指标参数说明

| **指标项** |     **指标名称**     | **单位** |
|---------|------------------|--------|
| memstore_percent       | Memstore_percent | %      |

### 计算表达式

100 * sum(ob_sysstat{stat_id="130001",@LABELS}) by (@GBLABELS) / sum(ob_sysstat{stat_id="130004",@LABELS}) by (@GBLABELS)

### 采集 SQL

* OceanBase V4.0 以下版本：

  ```sql
  select /*+ MONITOR_AGENT READ_CONSISTENCY(WEAK) */ con_id tenant_id, stat_id, value from v$sysstat where stat_id IN (130001, 130004) and (con_id > 1000 or con_id = 1) and class < 1000
  ```

* OceanBase V4.0 及以上版本：

  ```sql
  select /* MONITOR_AGENT */ con_id tenant_id, stat_id, value from v$sysstat where stat_id IN (130001, 130004) and (con_id > 1000 or con_id = 1) and class < 1000
  ```

## Active_memstore_percent

### 指标介绍

统计范围内，租户 MEMStore 使用占触发冻结的百分比。

### 指标参数说明

| **指标项** |     **指标名称**     | **单位** |
|---------|------------------|--------|
| active_memstore_percent       | Active_memstore_percent | %      |

### 计算表达式

100 * sum(ob_sysstat{stat_id="130000",@LABELS}) by (@GBLABELS) / sum(ob_sysstat{stat_id="130002",@LABELS}) by (@GBLABELS)

### 采集 SQL

* OceanBase V4.0 以下版本：

  ```sql
  select /*+ MONITOR_AGENT READ_CONSISTENCY(WEAK) */ con_id tenant_id, stat_id, value from v$sysstat where stat_id IN (130000, 130002) and (con_id > 1000 or con_id = 1) and class < 1000
  ```

* OceanBase V4.0 及以上版本：

  ```sql
  select /* MONITOR_AGENT */ con_id tenant_id, stat_id, value from v$sysstat where stat_id IN (130000, 130002) and (con_id > 1000 or con_id = 1) and class < 1000
  ```
