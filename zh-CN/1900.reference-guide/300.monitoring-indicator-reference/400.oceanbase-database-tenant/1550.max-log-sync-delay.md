# 日志同步最大延迟

本节为您介绍 OceanBase 租户的监控指标 **日志同步最大延迟** 。该指标统计 **统计周期** 内，租户日志同步最大延迟时长。您可指定统计范围，查询租户在单个 Zone 或 OBServer 节点的 **日志同步最大延迟** 数据。

## 指标介绍

**统计周期** 内，租户日志同步最大延迟时长。

## 指标参数说明

| **指标项** |   **指标名称**    | **单位** |
|---------|---------------|--------|
| max_ob_tenant_log_sync_delay      | max_ob_tenant_log_sync_delay | μs   |

## 计算表达式

max(ob_tenant_log_sync_delay{@LABELS}[@INTERVAL]) by (@GBLABELS)

### 采集 SQL

```sql
select /*+ MONITOR_AGENT READ_CONSISTENCY(WEAK) */ t.tenant_id, t.tenant_name, COALESCE(max(tmp_table.LOG_SYNC_DELAY), 0) LOG_SYNC_DELAY from (select a.SVR_IP, a.SVR_PORT, a.TENANT_ID, a.LS_ID, a.ROLE, CASE WHEN b.END_SCN >= a.END_SCN THEN (b.END_SCN - a.END_SCN) / 1000 ELSE 0 END AS LOG_SYNC_DELAY from  (select * from GV$OB_LOG_STAT where role='FOLLOWER') a inner join  (select * from GV$OB_LOG_STAT where role='LEADER') b on a.TENANT_ID=b.TENANT_ID and a.LS_ID=b.LS_ID) tmp_table RIGHT JOIN DBA_OB_TENANTS t ON tmp_table.TENANT_ID = t.TENANT_ID WHERE t.TENANT_TYPE != 'meta' group by tenant_id
```
