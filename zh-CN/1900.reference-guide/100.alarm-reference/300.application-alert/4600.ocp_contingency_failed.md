# ocp_contingency_failed 自愈预案执行失败

## 告警描述

OCP 4.2.0 版本提供了自愈预案，在告警产生后会自动生成预案，需用户确认后自动执行预案。如果执行预案失败，会产生此告警。

## 告警原理

| 参数 | 值 |
| --- | --- |
| 监控指标 | 无 |
| 指标来源 | 无 |
| 采集指标 | 无 |
| 监控表达式 | 无 |
| 采集周期 | 无 |

## 规则信息

| 监控表达式 | 监控指标含义 | 默认阈值 | 检测周期 | 消除周期 |
| --- | --- | --- | --- | --- |
| 无 | 无 | 无 | 无| 5 分钟 |

## 告警信息

| 告警触发方式 | 告警等级 | 范围 |
| --- | --- | --- |
| 基于监控指标的表达式 | 警告 | 服务 |

## 告警模板

* 告警概述

  * 模板：${alarm_target} ${alarm_name}
  * 样例：alarm_template_id=0:contingency_plan_name=observer_process_crashed:contingency_plan_id=415 自愈预案执行失败

* 告警详情

  * 模板：自愈预案 ${contingency_plan_name} ${contingency_plan_id} 执行失败，参数：params: ${contingency_plan_params}
  * 样例：自愈预案 observer_process_crashed 415 执行失败，参数：params: {svr_ip=xxx.xxx.xxx.xxx}

## 对系统的影响

系统出现问题后才会触发预案执行，如果预案执行失败应更多关注原来问题（应对预案未执行成功）对系统的影响，其次也需要关注预案重试执行或预案回退。
预案也是一个运维报错，如系统扩容、修改配置等，如果预案因为一些系统原因不能执行，则需要将预案回退。

## 可能原因

预案运行所依赖的资源不足、系统环境等问题，如：

* 资源不足，扩容失败。
* 运行时错误，如超时错误。

## 处理方法

1. 预案重试。应尽量保证预案能继续执行下去，确保原有问题能得到解决。详细操作，请参见 [告警预案](../500.appendix/400.execute-the-plan.md)。
2. 预案回退，可以联系 OceanBase 技术支持人员协助回退预案。
