# base_backup_timeout 数据备份任务超时

## 告警描述

该告警监测 OCP 发起的数据备份任务是否超时，超时则上报告警。

## 告警原理

OCP-Server 设置了每分钟的定时检查任务，当出现数据备份超时时触发该告警。

## 规则信息

|监控指标  |默认阈值  |持续时间   |检测周期    |消除周期   |
|----------|--------  |-------- |------------|-----------|
|NA        |NA        |0 秒       |60 秒      |5 分钟|

## 告警信息

|告警触发方式   |告警等级   |范围   |
|-----------    |--------   |--------|
|OCP 操作提醒   |注意       |服务   |

## 告警模板

* 告警概述

  * 模板：\${alarm_target} \${alarm_name}
  * 样例：ob_cluster=obcluster-1 数据备份任务超时

* 告警详情

  * 模板：集群：\${ob_cluster_name}[\${ob_cluster_id}]，租户：\${tenant_name}，告警：数据备份任务运行时长超过告警阈值：\${timeout_minutes_threshold} 分钟
  * 样例：集群：obcluster-1[10006]，租户：obtenant，告警：数据备份任务运行时长超过告警阈值：7 分钟

## 对系统的影响

数据备份超时可能是因为备份任务异常，可能会导致租户数据无法恢复。

## 可能原因

常见于以下原因：

* 设置的数据备份超时的报警阈值过小。
* 备份任务异常。

## 处理方法

* 如果最终数据备份任务成功，可登录 OCP 后，在集群 **备份恢复 > 备份策略** 页面适当调大数据备份超时的报警阈值。

* 其他原因，收集日志定位。

  * 若为逻辑日志备份，请查看备份服务的 `agentserver.log` 日志排查具体原因。

  * 若为物理日志备份，请查看 OBServer 节点日志排查具体原因。

    1. 在 OCP 的 **集群** 界面，通过 **集群列表** 进入到具体集群的 **总览** 页。

    2. 单击 **···** ，选择并单击 **下载日志**。

       * 时间范围需包含告警时间。

       * 日志类型选择 **OBServer 日志**。

    3. 单击 **下载日志**。

    4. 在下载的 `observer.log` 中搜索 WARN 和 ERROR 级别的日志，查看日志详情。
