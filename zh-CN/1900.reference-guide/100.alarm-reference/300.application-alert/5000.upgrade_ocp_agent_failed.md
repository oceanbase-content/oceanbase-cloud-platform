# upgrade_ocp_agent_failed OCP-Agent 升级失败

## 告警描述

升级 OCP 时，也需要升级 OCP-Agent 的版本。如果升级 OCP-Agent 失败，则会产生此告警。

## 告警原理

| 参数 | 值 |
| --- | --- |
| 监控指标 | 无 |
| 指标来源 | 无 |
| 采集指标 | 无 |
| 监控表达式 | 无 |
| 采集周期 | 无 |

## 规则信息

| 监控表达式 | 监控指标含义 | 默认阈值 | 检测周期 | 消除周期 |
| --- | --- | --- | --- | --- |
| 无 | 无 | 无 | 无 | 5 分钟 |

## 告警信息

| 告警触发方式 | 告警等级 | 范围 |
| --- | --- | --- |
| 基于监控指标的表达式 | 严重 | 服务 |

## 告警模板

* 告警概述

  * 模板：${alarm_target} ${alarm_name}
  * 样例：alarm_template_id=0:host_count=2 OCP-Agent升级失败

* 告警详情

  * 模板：告警：${alarm_name}，主机列表：${hosts}。
  * 样例：告警：OCP-Agent升级失败，主机列表：xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx。

## 对系统的影响

OCP-Agent 是部署在被 OCP 接管的主机上的进程，分为管理（运维）进程和监控进程。如果升级 OCP-Agent 失败，OCP-Agent 的版本与 OCP-Server 的版本不一致会导致如下问题：

1. 无法执行运维操作，运维操作如对 OB、OBProxy、主机等的日常运维任务。
2. 无法收集新版本的监控数据。

## 可能原因

升级失败原因较多，无常见原因，需具体分析。

## 处理方法

如遇到升级失败，请联系值班人员处理。
