# 采集主机包含 “dump tenant disk usage” 关键字日志

## 采集描述

日志查询 `observer.log` 中是否包含指定租户 “dump tenant disk usage.*disk_usage” 等关键字日志。

## 采集原理

查询 OBServer 日志目录（默认为 `/home/admin/oceanbase/log`）下的 `observer.log` 文件中是否存在包含 “dump tenant disk usage.*disk_usage={tenant_id:” 等关键字的 INFO 级别的日志。

执行如下命令进行采集，`ob_tenant_id` 替换为对应的租户 ID：

```shell
grep 'dump tenant disk usage.*disk_usage={tenant_id:${ob_tenant_id}' ${observer.log.path}/observer.log
```

<main id="notice" type='explain'>
<h4>说明</h4>
此类型日志会依据租户磁盘使用情况，每 10s 打印一次。
</main>

可看到如下采集结果：

```shell
[2023-05-15 17:30:59.055858] INFO  [STORAGE] ob_tenant_disk_usage_mgr.cpp:69 [87424][0][Y0-0000000000000000-0-0] [lt=11] [dc=0] dump tenant disk usage update info(disk_usage={tenant_id:1, max_disk_size:0, used_data_size:935329792, used_meta_size:56623104})  
```

具体参数说明如下：

* tenant_id：租户 ID。
* max_disk_size：租户的磁盘上限（OceanBase V4.x 之前版本未对租户磁盘使用量进行限制）。
* used_data_size：租户内用户数据使用的磁盘空间。
* used_meta_size：租户内管理数据使用的磁盘空间。
