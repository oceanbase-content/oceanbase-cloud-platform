# 采集租户 MEMStore 信息

## 采集描述

通过 `__all_virtual_tenant_memstore_info` 表查看租户 MEMStore 相关信息。

## 采集原理

* OceanBase V4.0.0 及以上版本：

    ```sql
    SELECT
      m.svr_ip,
      m.svr_port,
      round(m.active_span / 1024 / 1024 / 1024, 5) active_gb,
      round(m.freeze_trigger / 1024 / 1024 / 1024, 5) trigger_gb,
      round(m.memstore_used / 1024 / 1024 / 1024, 5) used_gb,
      round(m.memstore_limit / 1024 / 1024 / 1024, 5) limit_gb,
      m.freeze_cnt freeze_count
    FROM
      __all_virtual_tenant_memstore_info m
      INNER JOIN __all_tenant t ON t.tenant_id = m.tenant_id
    WHERE
      t.tenant_name = ?
    ```

* OceanBase V4.0.0 以下版本：

    ```sql
    SELECT
      m.svr_ip,
      svr_port,
      round(m.active_memstore_used / 1024 / 1024 / 1024, 5) active_gb,
      round(m.major_freeze_trigger / 1024 / 1024 / 1024, 5) trigger_gb,
      round(m.total_memstore_used / 1024 / 1024 / 1024, 5) used_gb,
      round(m.memstore_limit / 1024 / 1024 / 1024, 5) limit_gb,
      m.freeze_cnt freeze_count
    FROM
      __all_virtual_tenant_memstore_info m
      INNER JOIN __all_tenant t ON t.tenant_id = m.tenant_id
    WHERE
      t.tenant_name = ?
    ```
