# 采集租户 Top 内存使用模块

## 采集描述

采集指定租户内存使用情况。

## 采集原理

```sql
SELECT
  IFNULL(t.tenant_name, m.tenant_id) tenant_name,
  m.tenant_id,
  m.svr_ip,
  m.svr_port,
  m.ctx_name,
  m.mod_name,
  m.count,
  round(m.hold / 1024 / 1024 / 1024, 5) hold_gb,
  round(m.used / 1024 / 1024 / 1024, 5) used_gb
FROM
  __all_virtual_memory_info m
  LEFT JOIN __all_tenant t ON m.tenant_id = t.tenant_id
HAVING
  tenant_name = ?
ORDER BY
  used DESC
LIMIT 10
```
