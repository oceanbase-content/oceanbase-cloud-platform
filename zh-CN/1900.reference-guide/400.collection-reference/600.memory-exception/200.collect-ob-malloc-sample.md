# 采集 OBServer 内存分配采样数据

## 采集描述

通过 `__all_virtual_malloc_sample_info` 表查看 OBServer 内存分配采样信息。

## 版本限制

OceanBase 为 V4.0.0 及以上版本。

## 采集原理

```sql
SELECT svr_ip, svr_port, m.tenant_id, IFNULL(t.tenant_name, m.tenant_id) tenant_name,
                                   ctx_name, mod_name, 
                                   alloc_count, alloc_bytes, back_trace
                            FROM __all_virtual_malloc_sample_info m
                            LEFT JOIN __all_tenant t on m.tenant_id=t.tenant_id
                            ORDER BY alloc_bytes DESC LIMIT 10
```
