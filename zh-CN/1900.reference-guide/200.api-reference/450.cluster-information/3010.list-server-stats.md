# 获取集群内所有 OBServer 资源统计信息

## 功能说明

该接口用于获取集群内所有 OBServer 资源统计信息。

## 调用说明

### 接口约束

调用者需要通过 OCP 应用服务鉴权。

### 请求路径

`GET /api/v2/ob/clusters/{id}/serverStats`

### 请求参数

Path 参数：

|  参数  |  类型  |  必选  |  示例值  |  描述  |
|----|----|----|----|----|
|  id  |  Integer  |  是  |  -  |  集群 ID  |

### 返回结果

基础数据结构

|  参数  |  类型  | 说明                               |
|----|----|----------------------------------|
|  data  |  Object  | ServerResourceStats 的信息，详情参见下表。 |
|  successful  |  Boolean | 请求是否成功。                          |
|  timestamp |  Datetime  | 服务端完成请求的时间戳。                     |
|  duration |  Integer  | 服务端处理请求的时间（毫秒）。                  |
|  status |  Integer  | 符合 HTTP Status 规范的编码。            |
|  traceId |  String  | 请求的 Trace ID，用于排查问题。             |
|  server  |  String  | 响应请求的应用服务的地址。                    |

`ServerResourceStats` 的数据结构

|  参数  |  类型  |  说明  |
|----|----|----|
|  ip  |  String  |  OBServer IP  |
|  port  |  Integer  |  OBServer 端口号  |
|  zone  |  String  |  Zone 名称  |
|  cpuTotal  |  Number  |  CPU 总量  |
|  cpuAssigned  |  Number  |  CPU 分配量  |
|  memoryTotalByte  |  Integer  |  内存总量，单位 byte  |
|  memoryAssignedByte  |  Integer  |  内存分配量，单位 byte  |
|  logDiskTotalByte  |  Integer  |  日志盘总量，单位 byte  |
|  logDiskAssignedByte  |  Integer  |  日志盘分配量，单位 byte  |
|  logDiskUsedByte  |  Integer  |  日志盘使用量，单位 byte  |
|  dataDiskTotalByte  |  Integer  |  数据盘总量，单位 byte  |
|  dataDiskUsedByte  |  Integer  |  数据盘使用量，单位 byte  |

## 示例

### 请求示例

`GET /api/v2/ob/clusters/{id}/serverStats`

### 返回示例

```JSON
{
  "data": {
    "contents": [
      {
        "ip": "xxx.xxx.xxx.xxx",
        "port": 2882,
        "zone": "zone1",
        "cpuTotal": 8.00,
        "cpuAssigned": 3.50,
        "memoryAssignedByte": 11811160064,
        "memoryTotalByte": 46385646796,
        "logDiskTotalByte": 144955146240,
        "logDiskAssignedByte": 27917287424,
        "logDiskUsedByte": 2415919104,
        "dataDiskTotalByte": 837518622720,
        "dataDiskUsedByte": 199229440
      }
    ]
  },
  "duration": 284,
  "server": "xxx.xxx.xxx.xxx",
  "status": 200,
  "successful": true,
  "timestamp": "2024-04-10T10:39:43.33+08:00",
  "traceId": "xyz"
}
```
