查询主机的 OCP Agent 的工作进程列表 
============================================



功能说明 
-------------------------

查询主机的 OCP Agent 的工作进程列表。

调用说明 
-------------------------

### 接口约束 

调用者需要具备 HOST_VIEWER 权限。

### 请求路径 

`GET /compute/hosts/{hostId}/agent/processes`

### 请求参数 



|   参数   |  类型  | 必选 | 示例值 |  描述   |
|--------|------|----|-----|-------|
| hostId | Long | 是  | 100 | 主机 ID |



### 返回结果 



|        参数        |    类型    |               说明                |
|------------------|----------|---------------------------------|
| data             | Object   | 请求的数据。                          |
| ├─ contents      | Array    | HostAgentProcess 的数组，详细数据结构见下表。 |
| ├─ page          | Object   | 分页信息。                           |
| ├─ totalElements | Integer  | 总记录数。                           |
| ├─ totalPage     | Integer  | 总页数。                            |
| ├─ number        | Integer  | 当前页码。                           |
| ├─ size          | Integer  | 当前页大小。                          |
| successful       | Boolean  | 请求是否成功。                         |
| timestamp        | Datetime | 服务端完成请求的时间戳。                    |
| duration         | Integer  | 服务端处理请求的时间（毫秒）。                 |
| status           | Integer  | 符合 HTTP Status 规范的编码。           |
| traceId          | String   | 请求的 Trace ID，用于排查问题。            |
| server           | String   | 响应请求的应用服务的地址。                   |



HostAgentProcess 的数据结构


|       参数       |   类型    |            说明            |
|----------------|---------|--------------------------|
| id             | Long    | Agent 进程 ID              |
| hostId         | Long    | 主机 ID                    |
| alias          | String  | 进程别名                     |
| pid            | Integer | 进程 PID                   |
| user           | String  | 进程用户                     |
| startCommand   | String  | 启动命令                     |
| ports          | String  | 开放端口                     |
| elapsedTime    | Long    | 已存活时间（秒）                 |
| lastActiveTime | String  | 最近存活时间                   |
| status         | String  | 进程状态，可以为 STOPPED、STARTED |
| operable       | Boolean | 是否用户可操作                  |
| logFilePattern | String  | 日志文件名模版                  |
| createTime     | String  | 创建时间                     |
| updateTime     | String  | 修改时间                     |



示例 
-----------------------

### 请求示例 

`GET /compute/hosts/10/agent/processes?page=1&size=10`

### 返回示例 

```javascript
{
    "data": {
        "contents": [
            {
                "alias": "ocp_mgragent",
                "createTime": "2024-07-30T10:30:54+08:00",
                "elapsedTime": 2073545,
                "hostId": 5,
                "id": 94,
                "lastActiveTime": "2024-08-23T10:29:47+08:00",
                "logFilePattern": "/home/admin/ocp_agent/log/mgragent.log*",
                "operable": false,
                "pid": 88902,
                "ports": "62888",
                "startCommand": "/home/admin/ocp_agent/bin/ocp_mgragent",
                "status": "STARTED",
                "updateTime": "2024-07-30T10:30:54+08:00",
                "user": "root"
            },
            {
                "alias": "ocp_monagent",
                "createTime": "2024-07-30T10:30:54+08:00",
                "elapsedTime": 2073545,
                "hostId": 5,
                "id": 95,
                "lastActiveTime": "2024-08-23T10:29:47+08:00",
                "logFilePattern": "/home/admin/ocp_agent/log/monagent.log*",
                "operable": false,
                "pid": 88901,
                "ports": "62889",
                "startCommand": "/home/admin/ocp_agent/bin/ocp_monagent",
                "status": "STARTED",
                "updateTime": "2024-07-30T10:30:54+08:00",
                "user": "root"
            },
            {
                "alias": "ocp_agentd",
                "createTime": "2024-07-30T10:30:54+08:00",
                "elapsedTime": 2073546,
                "hostId": 5,
                "id": 96,
                "lastActiveTime": "2024-08-23T10:29:47+08:00",
                "logFilePattern": "/home/admin/ocp_agent/log/agentd.log*",
                "operable": false,
                "pid": 88882,
                "ports": null,
                "startCommand": "/home/admin/ocp_agent/bin/ocp_agentd -c /home/admin/ocp_agent/conf/agentd.yaml",
                "status": "STARTED",
                "updateTime": "2024-07-30T10:30:54+08:00",
                "user": "root"
            }
        ],
        "page": {
            "number": 1,
            "size": 10,
            "totalElements": 3,
            "totalPages": 1
        }
    },
    "duration": 30,
    "server": "a83ad33525",
    "status": 200,
    "successful": true,
    "timestamp": "2024-08-23T10:29:49.999+08:00",
    "traceId": "0e7f94ec86ea652d"
}
```


