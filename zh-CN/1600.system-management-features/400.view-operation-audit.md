# 查看操作审计

您可以在操作审计中查看近期不同事件类型的操作记录，包括 **事件类型** 、**事件操作** 、**资源名** 、**事件信息** 、**操作人** 、**执行时间** 和 **执行结果** 的内容。

<main id="notice" type='notice'>
<h4>功能适用性</h4>
<p>该内容仅适用于 OCP 企业版，OCP 社区版不提供此功能。</p>
</main>

## 背景信息

操作审计功能记录了在页面上进行的关键行为，包括对主机、OceanBase 集群、仲裁服务、OceanBase 租户、OBProxy 集群、Binlog 服务、备份恢复、软件包、OCP 用户、OCP 集群、凭据、告警、巡检、个人信息、自定义监控、监控大盘、系统参数、标签、SQL 性能和组织的管理操作；并在界面上对事件信息进行展示，当出现使用问题时，方便用户查看定位。

## 前提条件

已具备查看历史事件的权限。

## 操作步骤

1. 单击左导航栏 **系统管理** \> **操作审计** ，进入事件的查询页面。

2. 搜索查看操作审计。

   1. 搜索一段时间内操作审计：在下拉框中选择时间段，也可自定义设置。

      ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/431/%E4%BA%8B%E4%BB%B6%E5%88%97%E8%A1%A8.png)

   2. 搜索资源名称：在搜索框中输入要查看的事件资源名称，单击搜索图标或按回车键，即可查看对应事件记录。

3. 筛选查看操作审计。

   1. 筛选 **事件类型** ：单击事件类型后的筛选图标，勾选需要查看的类型，单击 **确定** 。事件类型包括：主机管理、OceanBase 集群管理、仲裁服务管理、OceanBase 租户管理、OBProxy 集群管理、Binlog 服务管理、备份恢复管理、软件包管理、OCP 用户管理、OCP 集群管理、凭据管理、告警管理、巡检管理、个人信息管理、自定义监控管理、监控大盘管理、系统参数管理、标签管理、SQL 性能管理和组织管理。

   2. 筛选 **事件操作** ：单击事件操作后的筛选图标，勾选需要查看的类型，单击 **确定** 。

      |    事件类型    |  事件操作    |
      |------------|-------|
      | 主机管理         | <ul><li>添加主机</li><li>删除主机</li><li>批量删除主机</li><li>修改主机信息</li><li>安装 OCP Agent</li><li>停止 OCP Agent</li><li>重启 OCP Agent</li><li>重装 OCP Agent</li><li>批量重装 OCP Agent</li><li>修改主机 Agent 参数配置</li><li>重置主机 Agent 参数配置</li><li>批量 Inactive Agents</li><li>批量 Active Agents</li><li>自重装 OCP Agent</li><li>刷新所有 Agent 的配置</li><li>增加 Agent module_config 变更定义</li><li>批量重启指定主机上的 OCP Agent</li><li>批量停止 OCP Agents</li><li>停止 agent 进程</li><li>重启 agent 进程</li><li>停止主机</li><li>查询日志</li><li>增加地域</li><li>绑定/解绑主机标签</li><li>忽略检查装机</li><li>添加新 VPC</li><li>下载全部日志</li><li>更新 VPC 信息</li><li>修复远端主机装机情况</li><li>升级主机 Agent 到最新版本</li><li>检查并修复装机</li><li>根据 ID 删除 VPC</li><li>启动主机</li><li>删除指定机型</li><li>删除地域</li><li>删除机房</li><li>增加一个新机房</li><li>添加一个机型</li><li>导入一个新主机</li><li>给主机增加监控对象</li><li>从主机删除监控对象</li></ul>  |
      | OceanBase 集群管理      | <ul><li>创建 OceanBase 集群 </li><li>  启动 OceanBase 集群 </li><li> 只读启动 OceanBase 集群 </li><li> 停止 OceanBase 集群 </li><li> 重启 OceanBase 集群 </li><li> 升级 OceanBase 集群 </li><li> 删除 OceanBase 集群 </li><li> 接管 OceanBase 集群 </li><li> 迁出 OceanBase 集群 </li><li> 日常切换 </li><li> 容灾切换 </li><li> 解耦备集群 </li><li> 修改 OceanBase 集群参数 </li><li> 修改 OceanBase 集群密码 </li><li> 添加 OBServer </li><li>批量添加 OBServer </li><li> 删除 OBServer </li><li> 启动 OBServer </li><li> 停止 OBServer </li><li> 重启 OBServer </li><li>批量删除 OBServer </li><li> 替换 OBServer </li><li> 添加 OBZones </li><li>批量添加 OBZones </li><li> 删除 OBZones </li><li> 停止 OBZones </li><li> 启动 OBZones </li><li> 重启 OBZones </li><li> 更新集群合并配置 </li><li> 关联仲裁服务 </li><li> 解除仲裁关联 </li><li> 替换仲裁服务 </li><li> 修改 TopSQL 开关 </li><li> 修改死锁检测开关 </li><li> 触发 OceanBase 集群合并 </li><li> 清除 OceanBase 合并失败状态 </li><li> 单机集中式转换为分布式集群模式 </li><li> 修改 OB 集群 Agent 参数配置 </li><li> 重置 OB 集群 Agent 参数配置</li><li>修改 OceanBase 集群状态</li><li>变更集群负载类型</li><li>开启/关闭集群 cgroup</li><li>修改 Zone 的 IDC</li><li>回滚 Unit 迁移</li><li>触发 Unit 迁移</li><li>尝试删除未关联租户的资源</li><li>采集集群合并信息</li><li>修改集群的配置参数类型开关</li><li>修改集群资源管理参数</li><li>重装 Server</li><li>导入集群</li><li>标记 meta 集群</li><li>同步集群信息</li><li>批量开启/关闭 OB 绑核</li><li>绑定/解绑集群标签</li><li>新增 OB 绑核配置</li><li>修改 OB 绑核配置</li><li>创建集群参数模板</li><li>修改集群参数模板</li><li>删除集群参数模板</li><li>创建资源单元规格</li><li>修改资源单元规格</li><li>删除资源单元规格</li></ul>   |
      | 仲裁服务管理 | <ul><li>创建仲裁服务 </li><li> 停止仲裁服务 </li><li> 启动仲裁服务 </li><li> 重启仲裁服务 </li><li> 升级仲裁服务 </li><li> 删除仲裁服务 </li><li> 接管仲裁服务 </li><li> 迁出仲裁服务</li><li> 为仲裁服务绑定/解绑标签</li></ul>  |
      | OceanBase 租户管理    | <ul><li>创建租户</li><li>异步创建租户</li><li> 删除租户 </li><li> 重命名租户 </li><li> 锁定租户 </li><li> 解锁租户 </li><li> 修改租户参数 </li><li> 修改租户密码 </li><li> 更新租户 Primary Zone </li><li> 更新租户白名单 </li><li> 添加副本 </li><li> 删除副本 </li><li> 修改副本 </li><li> 删除资源单元 </li><li> 创建数据库 </li><li> 修改数据库 </li><li> 删除数据库 </li><li> 创建数据库用户 </li><li> 删除数据库用户 </li><li> 授予用户全局权限 </li><li>撤销用户全局权限</li><li>修改用户全局权限</li><li>授予用户 DB 权限</li><li>撤销 DB 权限</li><li>授予对象权限</li><li>撤销对象权限</li><li>修改对象权限</li><li>修改用户密码</li><li> 锁定数据库用户 </li><li> 解锁数据库用户 </li><li>授予角色对象权限</li><li>撤销角色对象权限</li><li>修改角色对象权限</li><li> 修改数据库权限 </li><li> 开启仲裁 </li><li> 关闭仲裁 </li><li> 创建备租户 </li><li> 开启日志传输 </li><li> 暂停日志传输 </li><li> 日常切换 </li><li>批量日常切换</li><li> 容灾切换 </li><li>批量容灾切换</li><li> 备租户解耦 </li><li> 开启租户日志归档 </li><li>授予用户角色</li><li>撤销用户角色</li><li>修改用户角色</li><li> 创建数据库角色 </li><li> 删除数据库角色 </li><li>授予角色全局权限</li><li>撤销角色全局权限</li><li>修改角色全局权限</li><li>授予角色角色</li><li>撤销角色角色</li><li>修改 Oracle 角色角色</li><li>克隆租户</li><li> 创建服务名 </li><li> 删除服务名 </li><li> 修改服务名 </li><li>开通租户 Binlog 服务</li><li>关闭租户 Binlog 服务</li><li>修改租户 Binlog 服务</li><li>触发租户合并</li><li>批量触发租户合并</li><li>修改某租户的合并和转储配置</li><li>暂停租户合并</li><li>继续租户合并</li><li>清除合并失败状态</li><li>批量暂停租户合并</li><li>批量继续租户合并</li><li>批量清除合并失败状态</li><li>修改所有集群 ocp_monitor 用户密码</li><li>多云关闭当前会话，支持批量</li><li>关闭当前会话，支持批量</li><li>禁用会话级全链路配置</li><li>修改会话级全链路配置</li><li>关闭当前查询，支持批量</li><li>禁用全链路配置</li><li>修改全链路配置</li><li>绑定/解绑租户标签</li><li>同步 OB 集群下所有租户信息</li><li>删除指定 Unit group</li><li>修改租户备注</li><li>创建资源组</li><li>关闭资源管理计划</li><li>开启资源管理计划</li><li>修改资源组</li><li>修改资源管理计划</li><li>创建资源管理计划</li><li>删除资源管理计划</li><li>删除资源组</li><li>创建租户参数模板</li><li>修改租户参数模板</li><li>删除租户参数模板</li><li>禁用自动统计信息收集</li><li>启用自动统计信息收集</li><li>锁定统计信息收集</li><li>设置统计信息 prefs</li><li>解锁统计信息收集</li><li>发起手动统计信息收集任务</li><li>修改自动统计信息任务配置</li><li>取消自动统计信息任务，仅支持 ob 4.2.2 之后版本</li><li>撤销 Oracle 用户的角色</li><li>为 Oracle 用户授予角色</li><li>修改角色的角色</li><li>撤销 Oracle 角色的角色</li><li>修改 Oracle 角色的角色</li><li>为 Oracle 角色授予角色</li><li>删除数据库角色</li><li>创建数据库角色</li><li>授予 Oracle 角色系统权限</li><li>撤销 Oracle 角色系统权限</li><li>修改 Oracle 角色系统权限</li><li>更新 Oracle 审计配置</li><li>开启 Oracle 审计</li><li>关闭 Oracle 审计</li></ul>    |
      | OBProxy 集群管理 | <ul><li>创建 OBProxy 集群</li><li> 删除 OBProxy 集群   </li><li> 升级 OBProxy </li><li> 添加 OBProxy </li><li> 迁出 OBProxy 集群 </li><li> 强制重启 OBProxy </li><li> 启动 OBProxy </li><li> 停止 OBProxy </li><li> 重启 OBProxy </li><li> 删除 OBProxy </li><li> 修改 OBProxy 集群配置 </li><li> 修改 OBProxy 集群参数 </li><li> 新增 OBLink </li><li> 批量新增 OBLink </li><li> 修改 OBLink </li><li> 删除 OBLink </li><li> 修改 proxysys 密码 </li><li> 修改 proxyro 密码 </li><li> 接管 OBProxy </li></ul> |
      | Binlog 服务 | <ul><li> 创建 Binlog 集群 </li><li> 删除 Binlog 集群 </li><li> 启动 Binlog 集群 </li><li> 停止 Binlog 集群 </li><li> 重启 Binlog 集群 </li><li> 添加 Binlog Server </li><li> 删除 Binlog Server </li><li> 启动 Binlog Server </li><li> 停止 Binlog Server </li><li> 启动 Binlog 实例 </li><li> 停止 Binlog 实例 </li><li> 重启 Binlog 实例 </li><li>关闭 Binlog 实例订阅连接</li><li>配置 Binlog 实例限流</li><li>修改 Binlog 实例参数</li><li>修改 Binlog 集群参数</li><li> 升级 Binlog 集群 </li></ul> |
      | 备份恢复       | <ul><li>创建抽检策略</li><li> 创建集群备份策略   </li><li>创建备份策略</li><li>发起集群数据备份</li><li>发起数据备份</li><li>发起日志备份 </li><li>停止日志备份 </li><li>发起集群级恢复</li><li>发起租户恢复</li><li>发起租户级恢复</li><li>打开集群日志备份文件切片模式开关</li><li> 删除数据备份文件 </li><li> 设置集群的备份路径 </li><li> 发起集群恢复预览 </li><li> 修改集群备份策略 </li><li> 删除集群备份策略 </li><li> 启动集群备份调度 </li><li> 暂停集群备份调度 </li><li> 停止某台机器上的服务 </li><li> 解析全局备份信息 </li><li> 撤销加载的数据路径 </li><li> 向备份恢复服务中添加机器 </li><li> 加载需要恢复数据的路径 </li><li> 取消恢复任务 </li><li> 发起恢复预览 </li><li> 修改抽检策略 </li><li> 删除抽检策略 </li><li> 启动抽检策略 </li><li> 暂停抽检策略 </li><li> 安装组件服务 </li><li> 升级服务版本 </li><li> 更新服务配置 </li><li> 删除服务 </li><li> 启动某台机器上的服务 </li><li> 卸载某台机器上的服务 </li><li> 重启某台机器上的服务 </li><li> 发起租户数据备份 </li><li> 创建租户备份策略 </li><li> 更新租户备份策略 </li><li> 删除租户备份策略 </li><li> 启动租户备份调度 </li><li> 暂停租户备份调度 </li></ul>  |
      | 软件包管理  | <ul><li>删除软件包</li><li>批量删除软件包</li><li>上传软件包</li><li>创建软件包</li></ul>  |
      | OCP 用户管理       | <ul><li>创建 OCP 用户</li><li>删除 OCP 用户   </li><li> 创建 OCP 角色 </li><li> 修改 OCP 角色  </li><li>删除 OCP 角色</li><li> 修改 OCP 用户</li><li>  修改 OCP 用户密码 </li><li> 刷新流控策略 </li><li> 锁定指定用户账户 </li><li> 删除 accessKey </li><li> 新增 accessKey </li><li> 启用 accessKey </li><li> 禁用 accessKey </li><li> 删除用户登录信息 </li><li> 解除锁定指定用户账户 </li></ul> |
      | OCP 集群管理 | <ul><li>注册备 OCP 集群 </li><li> 删除 OCP 集群 </li><li> 解除备 OCP 集群关联 </li><li> OCP 集群容灾切换 </li><li> OCP 集群日常切换 </li><li>更新 OCP 集群配置</li></ul>  |
      | 凭据管理 | <ul><li>创建凭据 </li><li> 更新凭据 </li><li> 删除凭据 </li><li> 批量删除凭据 </li><li> 导入凭据 </li><li> 导出凭据 </li></ul> |
      | 告警管理 | <ul><li>生成告警事件 </li><li> 创建告警屏蔽 </li><li> 创建告警分组 </li><li> 复制告警分组 </li><li> 发送通知 </li><li> 创建告警规则 </li><li> 删除告警屏蔽 </li><li> 删除告警分组 </li><li> 批量添加告警项到多个告警分组中 </li><li> 删除告警规则 </li><li> 批量删除告警规则 </li><li> 主动恢复告警 </li><li> 创建告警模板 </li><li> 更新告警模板 </li><li> 删除告警模板 </li><li> 设置告警模板的告警对象 </li><li> 设置告警模板的状态 </li><li> 下载告警事件快照 </li><li> 发送测试通知 </li><li> 更新告警屏蔽 </li><li> 更新告警分组 </li><li> 更新告警规则 </li><li> 创建订阅配置 </li><li> 删除订阅配置 </li><li> 更新订阅配置 </li><li> 批量删除告警分组中的告警项 </li><li> 更新通道 </li><li> 删除通道 </li><li> 创建告警通道 </li><li> 创建告警指标规则 </li></ul> |
      | 巡检管理 | <ul><li>触发巡检 </li><li> 修改巡检项 </li><li> 修改巡检调度规则 </li><li> 设置巡检开关 </li><li> 删除巡检报告 </li></ul> |
      | 个人信息管理 | <ul><li>禁用个人 accessKey </li><li> 删除个人 accessKey </li><li> 新增个人 accessKey </li><li> 启用个人 accessKey </li><li> 修改用户的密码 </li><li> 修改个人信息 </li></ul> |
      | 自定义监控管理 | <ul><li>创建监控指标项 </li><li> 修改监控指标项 </li><li> 删除监控指标项 </li><li> 创建 SQL 类型监控采集项 </li><li> 删除监控采集项 </li><li> 创建监控图表 </li><li> 更新监控图表 </li><li> 删除监控图表 </li></ul> |
      | 监控大盘管理 | <ul><li>更新监控仪表盘 </li><li> 删除监控仪表盘 </li><li> 新建监控仪表盘 </li><li> 移动监控仪表盘 </li></ul> |
      | 系统参数管理 | <ul><li>修改配置 </li><li> 刷新所有配置信息 </li></ul> |
      | 标签管理 | <ul><li>标签绑定资源 </li><li> 批量创建标签 </li><li> 修改标签信息 </li><li> 删除指定标签 </li><li> 标签绑定/解绑资源 </li><li> 创建标签 </li></ul> |
      | SQL 性能管理 | <ul><li>发起诊断 </li><li> 批量关闭事务 </li><li> 批量删除 Outline </li><li> 为 SQL 绑定 Outline </li><li> 删除 SQL 的 Outline </li><li> 新增 SQL 打标 </li><li> 生成 ASH 性能报告 </li><li> 生成性能报告 </li><li> 生成快照 </li><li> SQL 绑定 Outlin（多云） </li><li> SQL 解绑 Outlin </li></ul> |
      | 组织管理 | <ul><li>添加用户 </li><li> 批量添加组织资源 </li><li> 修改组织信息 </li><li> 从组织中移除用户 </li><li> 删除组织 </li><li> 移除指定类型的资源 </li><li> 批量创建组织 </li><li> 移除指定类型的指定资源 </li></ul> |

4. 按 **事件信息** 查看操作审计，在搜索框中输入单击事件信息内容，在右侧弹出框，查看详细信息。

   事件信息是事件发生时的接口调用参数（已对密码等信息进行脱敏处理）。

5. 按操作人查看操作审计，单击 **操作人** 后的筛选图标，勾选需要查看的操作人，单击 **确定** 。

6. 按时间顺序查看操作审计。

   1. 按时间由远到近的顺序查看操作审计：单击 **执行时间** 后的上三角图标。

   2. 按时间由近到远的顺序查看操作审计：单击 **执行时间** 后的下三角图标。

7. 按执行结果查看操作审计，单击 **执行结果** 后的筛选图标，根据执行结果对事件进行筛选。
