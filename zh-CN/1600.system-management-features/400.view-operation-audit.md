# 查看操作审计

您可以在操作审计中查看近期不同事件类型的操作记录，包括 **事件类型** 、 **事件操作** 、 **资源名** 、 **事件信息** 、 **操作人** 、 **执行时间** 和 **执行结果** 的内容。

<main id="notice" type='notice'>
<h4>功能适用性</h4>
<p>该内容仅适用于 OCP 企业版，OCP 社区版不提供此功能。</p>
</main>

## 背景信息

操作审计功能记录了在页面上进行的关键行为，包括对主机、OceanBase 集群、OCP 集群管理、OBProxy 集群、Binlog Service、租户、备份恢复、平台用户、软件包管理、仲裁服务管理和凭据管理的管理操作；并在界面上对事件信息进行展示，当出现使用问题时，方便用户查看定位。

## 前提条件

已具备查看历史事件的权限。

## 操作步骤

1. 单击左导航栏 **系统管理** \> **操作审计** ，进入事件的查询页面。

2. 搜索查看操作审计。

   1. 搜索一段时间内操作审计：在下拉框中选择时间段，也可自定义设置。

      ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/431/%E4%BA%8B%E4%BB%B6%E5%88%97%E8%A1%A8.png)

   2. 搜索资源名称：在搜索框中输入要查看的事件资源名称，单击搜索图标或按回车键，即可查看对应事件记录。

3. 筛选查看操作审计。

   1. 筛选 **事件类型** ：单击事件类型后的筛选图标，勾选需要查看的类型，单击 **确定** 。事件类型包括：主机、OceanBase 集群、OCP 集群管理、OBProxy 集群、Binlog Service、租户、备份恢复、平台用户、软件包管理、仲裁服务管理和凭据管理。

   2. 筛选 **事件操作** ：单击事件操作后的筛选图标，勾选需要查看的类型，单击 **确定** 。

      |    事件类型    |  事件操作    |
      |------------|-------|
      | 主机         | <ul><li>添加主机</li><li> 修改主机 </li><li> 删除主机</li><li>  修改主机信息 </li><li> 安装 OCPAgent </li><li> 停止 OCPAgent </li><li> 重启 OCPAgent </li><li> 重装 OCPAgent </li><li> 修改主机 Agent 参数配置 </li><li> 重置主机 Agent 参数配置</li></ul>  |
      | OceanBase 集群      | <ul><li>创建 OceanBase 集群 </li><li>  启动 OceanBase 集群 </li><li> 只读启动 OceanBase 集群 </li><li> 停止 OceanBase 集群 </li><li> 重启 OceanBase 集群 </li><li> 升级 OceanBase 集群 </li><li> 删除 OceanBase 集群 </li><li> 接管 OceanBase 集群 </li><li> 迁出 OceanBase 集群 </li><li> 日常切换 </li><li> 容灾切换 </li><li> 解耦备集群 </li><li> 修改 OceanBase 集群参数 </li><li> 修改 OceanBase 集群密码 </li><li> 添加 OBServer </li><li> 删除 OBServer </li><li> 启动 OBServer </li><li> 停止 OBServer </li><li> 重启 OBServer </li><li> 替换 OBServer </li><li> 添加 OBZones </li><li> 删除 OBZones </li><li> 停止 OBZones </li><li> 启动 OBZones </li><li> 重启 OBZones </li><li> 更新集群合并配置 </li><li> 关联仲裁服务 </li><li> 解除仲裁服务 </li><li> 替换仲裁服务 </li><li> 修改 TopSQL 开关 </li><li> 修改死锁检测开关 </li><li> 触发 OceanBase 集群开关 </li><li> 清除 OceanBase 合并失败状态 </li><li> 单机集中式转换为分布式集群模式 </li><li> 修改 OB 集群 Agent 参数配置 </li><li> 重置 OB 集群 Agent 参数配置</li></ul>   |
      | 仲裁服务 | <ul><li>创建仲裁服务 </li><li> 停止仲裁服务 </li><li> 重启仲裁服务 </li><li> 升级仲裁服务 </li><li> 删除仲裁服务 </li><li> 接管仲裁服务 </li><li> 迁出仲裁服务</li></ul>  |
      | OceanBase 租户    | <ul><li>创建租户</li><li> 删除租户 </li><li> 重命名租户 </li><li> 锁定租户 </li><li> 解锁租户 </li><li> 修改租户参数 </li><li> 修改租户密码 </li><li> 更新租户 Primary Zone </li><li> 更新租户白名单 </li><li> 添加副本 </li><li> 删除副本 </li><li> 修改副本 </li><li> 删除资源单元 </li><li> 创建数据库 </li><li> 修改数据库 </li><li> 删除数据库 </li><li> 创建数据库用户 </li><li> 删除数据库用户 </li><li> 修改数据库用户 </li><li> 锁定数据库用户 </li><li> 解锁数据库用户 </li><li> 修改数据库角色 </li><li> 修改数据库权限 </li><li> 开启仲裁 </li><li> 关闭仲裁 </li><li> 创建备租户 </li><li> 开启日志传输 </li><li> 暂停日志传输 </li><li> 日常切换 </li><li> 容灾切换 </li><li> 备租户解耦 </li><li> 开启日志归档 </li><li> 创建服务名 </li><li> 删除服务名 </li><li> 修改服务名 </li><li> 创建数据库角色 </li><li> 删除数据库角色 </li></ul>    |
      | OBProxy 集群 | <ul><li>创建 OBProxy 集群</li><li> 删除 OBProxy 集群   </li><li> 升级 OBProxy </li><li> 添加 OBProxy </li><li> 迁出 OBProxy 集群 </li><li> 强制重启 OBProxy </li><li> 启动 OBProxy </li><li> 停止 OBProxy </li><li> 重启 OBProxy </li><li> 删除 OBProxy </li><li> 修改 OBProxy 集群配置 </li><li> 修改 OBProxy 集群参数 </li><li> 新增 OBLink </li><li> 修改 OBLink </li><li> 删除 OBLink </li><li> 修改 proxysys 密码 </li><li> 修改 proxyro 密码 </li><li> 接管 OBProxy </li></ul> |
      | Binlog 服务 | <ul><li> 创建 Binlog 集群 </li><li> 删除 Binlog 集群 </li><li> 启动 Binlog 集群 </li><li> 停止 Binlog 集群 </li><li> 重启 Binlog 集群 </li><li> 添加 Binlog Server </li><li> 删除 Binlog Server </li><li> 启动 Binlog Server </li><li> 停止 Binlog Server </li><li> 启动 Binlog 实例 </li><li> 停止 Binlog 实例 </li><li> 重启 Binlog 实例 </li><li> 开通租户 Binlog 服务 </li><li> 关闭租户 Binlog 服务 </li><li> 修改租户 Binlog 服务 </li></ul> |
      | 备份恢复       | <ul><li>创建抽检策略</li><li> 创建备份策略   </li><li>发起数据备份</li><li>发起日志备份 </li><li> 停止日志备份 </li><li>发起租户恢复  </li></ul>  |
      | 软件包管理  | 删除软件包  |
      | OCP 用户       | <ul><li>创建 OCP 用户</li><li>删除 OCP 用户   </li><li> 创建 OCP 角色 </li><li> 修改 OCP 角色  </li><li>删除 OCP 角色</li><li> 修改 OCP 用户</li><li>  修改 OCP 用户密码   </li></ul> |
      | OCP 集群管理 | <ul><li>注册备 OCP 集群 </li><li> 删除 OCP 集群 </li><li> 解除备 OCP 集群关联 </li><li> OCP 集群容灾切换 </li><li> OCP 集群日常切换 </li></ul>  |
      | 凭据管理 | <ul><li>创建凭据 </li><li> 更新凭据 </li><li> 删除凭据 </li><li> 导入凭据 </li><li> 导出凭据 </li></ul> |

4. 按 **事件信息** 查看操作审计，在搜索框中输入单击事件信息内容，在右侧弹出框，查看详细信息。

   事件信息是事件发生时的接口调用参数（已对密码等信息进行脱敏处理）。

5. 按操作人查看操作审计，单击 **操作人** 后的筛选图标，勾选需要查看的操作人，单击 **确定。**

6. 按时间顺序查看操作审计。

   1. 按时间由远到近的顺序查看操作审计：单击 **执行时间** 后的上三角图标。

   2. 按时间由近到远的顺序查看操作审计：单击 **执行时间** 后的下三角图标。

7. 按执行结果查看操作审计，单击 **执行结果** 后的筛选图标，根据执行结果对时间进行筛选。
