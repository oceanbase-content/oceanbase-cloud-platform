# base_secondary_backup_fail 数据二次备份任务失败

## 告警描述

该告警监测 OCP 发起的数据二次备份任务是否失败，失败则上报告警。

## 告警原理

OCP-Server 设置了每分钟的定时检查任务，当出现数据二次备份失败时触发该告警。

## 规则信息

|监控指标  |默认阈值  |持续时间   |检测周期    |消除周期   |
|----------|--------  |-------- |------------|-----------|
|NA        |NA        |0 秒       |60 秒      |5 分钟|

## 告警信息

|告警触发方式   |告警等级   |范围   |
|-----------    |--------   |--------|
|OCP 操作提醒   |严重       |服务   |

## 告警模板

* 告警概述
  * 模板：\${alarm_target} \${alarm_name}
  * 样例：ob_cluster=obcluster-1 数据二次备份任务失败
* 告警详情
  * 模板：集群：\${ob_cluster_name}[\${ob_cluster_id}]，告警：数据二次备份任务失败，任务开始时间：\${start_time}，任务结束时间：\${finish_time}
  * 样例：集群：obcluster-1[10006]，告警：数据二次备份任务失败，任务开始时间：2020-01-05T02:00:00Z，任务结束时间：2020-01-05T03:00:00Z

## 对系统的影响

数据二次备份失败可能会导致通过数据二次备份恢复租户时，租户数据无法恢复。

## 可能原因

存在多种原因，需要根据具体失败原因进行定位。

## 处理方法

请查看 OBServer 日志排查具体原因。

1. 在 OCP 的 **集群** 界面，通过 **集群列表** 进入到具体集群的 **总览** 页。

2. 单击 **···** ，选择并单击 **下载日志** 。

     * 时间范围需包含告警时间。
     * 日志类型选择 **OBServer 日志** 。

3. 单击 **下载日志**，下载所筛选的 OBServer 日志。

4. 在下载的 `observer.log` 中搜索 WARN 和 ERROR 级别的日志，查看日志详情。
