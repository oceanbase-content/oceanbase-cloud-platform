# 查看自治服务总览

自治服务主要是将 OCP 的日常运维能力进行整合，您可通过 **自治服务** 快速并直观地了解 OCP 下所有集群的负载及健康情况。

<main id="notice" type='notice'>
    <h4>功能适用性</h4>
    <p>该内容仅适用于 OCP 企业版，OCP 社区版不提供此功能。</p>
</main>

## 前提条件

当前登录 OCP 的用户具备如下权限时，才能查看自治服务总览信息：

* **集群只读** 或 **租户只读** 资源权限。
* 自治服务任一菜单权限。

## 异常事件

当近 3 天集群中有出现异常事件时，自治服务首页会展示相应的异常事件列表。可滚动查看近期发生的异常事情清单，按发生时间降序排列。

* 可查看异常事件的 **集群**、**对象**、**异常名称**、**异常表现**、**当前状态**、**发生时间**、**恢复时间**、**持续时间**、**操作** 信息。

* 单击集群名称，可以跳转到对应集群的概览界面。

* 单击事件 **操作** 列的 **SQL 诊断**，将跳转到自集群的实时诊断界面，并按异常事件的发生时间和恢复时间进行 TopSQL 的筛选。

![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/420/oas-overview-1.png)

## 诊断信息

**诊断信息** 模块展示了 **SQL 诊断**、**事务诊断**、**会话诊断** 和 **优化历史** 的统计信息，主要内容包括：

* SQL 诊断：近 6 小时内的有可疑 SQL 的集群数量、有 SlowSQL 的集群数量和有高危 SQL 的集群数量。

* 事务诊断：实时状态下有长事务的集群数量和有悬挂事务的集群数量。

* 会话诊断：7 天内有死锁的集群数量。

* 优化历史：7 天内有优化历史的集群数量。

![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/432/bp1/%E8%AF%8A%E6%96%AD%E4%BF%A1%E6%81%AF.png)

单击指标名称或集群数量，**集群详情** 列表中将以此为条件进行筛选，并展示符合条件的集群。以下图为例，单击 **有可疑 SQL 的集群**，集群详情列表中将只展示有可疑 SQL 的集群详情。

![2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/432/bp1/%E9%9B%86%E7%BE%A4%E8%AF%A6%E6%83%85.png)

## 集群详情

**集群详情** 模块展示了各集群下的 **SQL 诊断**、**实时事务**、**会话**、**优化历史** 和 **资源水位** 信息。

* 单击各类型下统计数字，可跳转至对应的详情页面。

* 支持对 **可疑 SQL**、**SlowSQL**、**高危 SQL**、**长事务**、**悬挂事务**、**死锁会话**、**活跃会话**、**会话总数**、**优化历史** 进行升序或降序操作。

* 单击集群名称，查看集群自治服务详情概览。

* 在右上角的搜索窗口，可以通过集群名进行搜索，快速找到对应集群。

![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/432/bp1/%E9%9B%86%E7%BE%A4%E8%AF%A6%E6%83%85-%E6%B2%A1%E6%9C%89%E6%96%B0%E5%A2%9E.png)
