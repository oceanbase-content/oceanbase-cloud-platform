# 管理图表

当创建大盘后，可在大盘中新增您想关注的监控图表。

## 前提条件

* 当前登录用户需具有 PROFILE 权限。
* 不同用户创建的大盘相互隔离，仅可查看和管理自己名下的监控大盘。
* 每个大盘最多可添加 32 个监控图表。
* 当前登录的用户需具有 **监控对象** 的 **只读** 权限。

## 新增图表

OCP 支持如下 3 种方式新增图表：

* 方式 1：单击大盘![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/422/%E5%A4%A7%E7%9B%98%E6%96%B0%E5%A2%9E%E5%9B%BE%E8%A1%A8.png)图标，在下拉列表中选择 **添加图表**。
* 方式 2：当大盘中暂无图表时，单击大盘中的 **添加图表** 按钮进行添加。
* 方式 3：在大盘中选择具体分组，单击分组中的![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/422/%E5%88%86%E7%BB%84%E6%96%B0%E5%A2%9E%E5%9B%BE%E8%A1%A8.png)图标，在下拉列表中选择 **添加图表**。

以下步骤以 **方式 1** 为例。

1. 登录 OCP 。

2. 在左侧导航栏选择 **监控大盘** 。

3. 进入待添加图表的大盘页签下，单击新增图标，在下拉列表中选择 **添加图表**。

    ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/422/%E6%B7%BB%E5%8A%A0%E5%9B%BE%E8%A1%A8%E6%96%B9%E5%BC%8F%E4%B8%80.png)

4. 在面板中输入图表相关信息，单击 **确定**。

    相关参数说明如下。

   |     参数  |  说明  |
   |---------------|---------|
   | 展示形式 | 选择图表的展示形式，分为 **单个图表** 和 **多个图表**。<ul><li>单个图表：常用于添加单个图表，支持 **单对象单指标**、**单对象多指标**、**多对象单指标** 和 **多对象多指标** 的任一图表场景。</li><li>多个图表：常用于批量添加多个单对象单指标图表。选择多个 **监控对象** 或多个 **监控指标** 后，系统会按照 “对象: 指标” 的格式自动生成图表名称和描述，并展示成多个单对象单指标的图表。</br>例如：多个图表形式下，当监控对象选择 `cluster01` 和 `cluster02` 两个集群、监控指标选择 `sql_all_count` 和 `sql_select_count` 两个指标时，会批量新增 `cluster01: sql_all_count`、`cluster02: sql_select_count`、`cluster02: sql_select_count`、`cluster02: sql_select_count` 四个单对象单指标图表。</li></ul>  |
   | 图表名称 | 监控图表在大盘中的标识，具有唯一性，长度为 2~32 个字符。  |
   | 展示分组 | 可选项。用于对每个监控图表进行简单分类，相同分组的图表将展示在同一模块下。<ul><li>支持单击 **添加分组** 来新增可用分组。</li><li>当您在具体分组下新增图表时，该参数不可选。</li></ul>  |
   | 图表说明 | 可选项。添加监控图表的备注说明信息。  |
   | 选择监控对象和指标 | 您可参考如下步骤进行配置：<ol><li>选择监控对象类型：支持 **OceanBase 集群**、**OceanBase 租户**、**OBProxy 集群** 和 **主机** 四种类型。</li><li>选择监控对象：在下拉列表中选择具体监控对象，可选择的对象与 **监控对象类型** 存在关联，支持多选。</li><li>选择监控指标：在下拉列表中选择具体指标项，可选择的指标项与 **监控对象** 存在关联，支持多选。<ul><li>若列表中存在所需的指标项，可从列表中直接选择；否则，可单击列表下方的 **添加指标** 来创建所需的指标项，详情可参见 [新建指标项](../880.manage-performance-monitoring/200.manage-custom-monitoring/300.manage-indicator-items/100.create-a-indicator-item.md)。</li><li>可选择的监控指标中包括 OCP 内置指标项和用户自定义指标项。关于 OCP 内置指标项的详细说明，可参见 [监控指标参考](../1900.reference-guide/300.monitoring-indicator-reference/100.overview-of-metrics.md)。</li></ul><main id="notice" type='notice'><h4>注意</h4><p>所选指标的单位最多不能超过两种。</p></main></li><li>选择图表类型：选择监控指标的展示方式，目前支持的图表类型包括如下 3 大类 7 种图表。<ul><li>趋势类：**折线图**、**面积图**、**柱状图**。</li><li>展示类：**数字指标卡**、**表格**。</li><li>占比类：**水波图**、**环形图**。</li></ul> </li></ol>  |

   系统默认只添加一个图表，如果您需要批量添加多个图表，可以在下方单击 **继续添加**，添加多个图表。

   ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/430/%E6%B7%BB%E5%8A%A0%E5%9B%BE%E8%A1%A8.png)

## 相关操作

您可对大盘中的监控图表进行如下运维操作。

* **移动图表**：拖拽图表头部，可在大盘中自由调整图表位置。
* **查看详细信息**：将光标悬停于趋势图中某时刻，可查看该时刻的详细数据；拖拽光标选中某区域，系统会放大显示该区域的趋势信息，您可查看该指标的在此时间段的详细趋势，双击该趋势图可恢复。
* **隐藏图例信息**：单击趋势图下方的图例标识，使其置灰，趋势图中将不展示该图例相关信息。您可通过此功能隐藏其他图例数据。
* **监控下钻**：单击下图 ① 处的 **下钻分析** 图标，可下钻查看不同维度的监控数据。当您发现监控对象的监控数据异常时，您可通过下钻分析，定位到引起响应时间异常的服务器。

    <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>仅 <b>折线图</b> 支持监控下钻功能，且监控对象需为单个 OceanBase 集群或租户。</p>
    </main>

* **监控对比**：单击下图 ② 处的 **监控对比** 图标，自定义需要对比的时间段后，可查看该时间段监控数据的环比数据（对比上个时间段）、日同比数据（对比前一天该时间段）、周同比数据（对比上周该时间段）及月同比数据（对比上个月该时间段）。
* **编辑**：单击下图 ③ 处的 **编辑图表** 图标，可修改图表信息。
* **删除**：单击下图 ④ 处的 **删除图表** 图标，可将该图表从大盘中删除。
* **放大某一趋势图**：单击下图 ⑤ 处的 **放大查看** 图标，**查看详细信息** 与 **隐藏细分指标** 功能在放大的趋势图中同样适用。
* **调整图表大小**：单击下图 ⑥ 处的调整图标，可对整个图表进行放大或缩小操作，如上所有功能在放大和缩小的趋势图中同样适用。

![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/422/%E7%AE%A1%E7%90%86%E5%9B%BE%E8%A1%A8.png)
